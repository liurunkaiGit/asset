<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="Cache-Control" content="no-store">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <link th:href="@{/css/agentcss/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/agentcss/agent-toolbar.css}" rel="stylesheet"/>

    <!--[if lt IE 9]>
    <script th:src="@{/ajax/libs/agentjs/html5shiv.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/respond.min.js}"></script>
    <![endif]-->


    <script th:src="@{/ajax/libs/agentjs/jquery.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/socket.io.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/agent-client.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/moment.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/agent-toolbar.js}"></script>
    <script th:src="@{/js/reset.min.js}"></script>

    <th:block th:include="include :: header('催收作业页面')"/>
    <th:block th:include="include :: layout-latest-css"/>
    <th:block th:include="include :: ztree-css"/>

    <th:block th:include="include :: datetimepicker-css" />

    <style type="text/css">
        .sameCaseInfoDetail {
            position: relative;
            top: 10px;
        }
        .sameCaseValue {
            margin-right: 100px;
        }
        #custContactTbody tr td{
            text-align: center;
        }
    </style>

</head>

<body class="gray-bg">
<input type="hidden" id="firstEnterCaseNo" name="caseNo" th:value="${caseNo}">
<input type="hidden" id="firstOrgId" name="caseNo" th:value="${orgId}">
<input type="hidden" id="firstImportBatchNo" name="caseNo" th:value="${importBatchNo}">
<input type="hidden" id="firstCertificateNo" name="certificateNo" th:value="${certificateNo}">
<div class="ui-layout-center" >
    <div class="container-div" style="overflow: hidden">
        <div class="row">
            <div class="col-sm-12 search-collapse" id="baseInfoDiv" style="height: 105px">
                <h4 class="form-header h4">基本信息 | <label id="orgCasnoTitle"></label></h4>
                <div class="collImgdiv">
                    <img src="/img/icontouxiang.png" class="imgso" width="30px" height="45px"/>
                </div>
                <div class="collBaseInfoMid">
                    <b><span id="customName" style="color: #3593e0;font-size: 24px;" ></span></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <b>&nbsp;&nbsp;<span id="handSeparation"  style="font-size: 24px;"></span></b><br/>
                    <span id="sex" style="font-size: 18px;"></span>|
                    <span id="age" style="font-size: 18px;"></span>|
                    <span id="marrageStatus" style="font-size: 18px;"></span>|
                    <span id="education" style="font-size: 18px;"></span>
                </div>
                <div class="collBaseInfoRight">
                    <span id="customCertificateNo"   style="font-size: 18px;"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 16px;">信函:</span>
                    <span id="letterStatus"  style="font-size: 16px;"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 16px;">共案:</span>
                    <span id="isSameCase"  style="color: red;font-size: 16px;"></span><br/>
                    <b><span style="font-size: 18px;">委案金额:</span></b>
                    <b><span id="arrearsTotal" style="color: red;font-size: 18px"></span>元</b>&nbsp;&nbsp;&nbsp;&nbsp;
                    <b><span style="font-size: 18px;">结案应还金额:</span></b>
                    <b><span id="closeCaseYhje"  style="color: red;font-size: 18px"></span>元</b>
                </div>
            </div>
            <div class="col-sm-12 search-collapse" id="detailInfoDiv"  style="height: 380px;overflow: auto">
                <div class="tabs-container" >
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#tab-5" aria-expanded="true" onclick="viewTabDetail('info')">详细信息</a><input type="hidden" id="info" value="1"></li>
                        <li class=""><a data-toggle="tab" href="#tab-1" aria-expanded="false" onclick="viewTabDetail('locus')">案件历史轨迹</a><input type="hidden" id="locus" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false" onclick="viewTabDetail('call')">电催记录</a><input type="hidden" id="call" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-3" aria-expanded="false" onclick="viewTabDetail('action')">行动历史</a><input type="hidden" id="action" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-4" aria-expanded="false" onclick="viewTabDetail('repay')">还款历史</a><input type="hidden" id="repay" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-6" aria-expanded="false" onclick="viewTabDetail('cust')">联系人</a><input type="hidden" id="cust" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-7" aria-expanded="false" onclick="viewTabDetail('add')">补充信息</a><input type="hidden" id="add" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-8" aria-expanded="false" onclick="viewTabDetail('find')">查找记录</a><input type="hidden" id="find" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-9" aria-expanded="false" onclick="viewTabDetail('inforeporting')">信息上报</a><input type="hidden" id="inforeporting" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-10" aria-expanded="false" onclick="viewTabDetail('sameCaseInfo')">共案信息</a><input type="hidden" id="sameCaseInfo" value="0"></li>
                    </ul>
                    <div id="tabDiv" class="tab-content tabDiv">
                        <div id="tab-5" class="tab-pane active">
                            <div class="collLeftInfo">
                                <div class="collInfoOne">
                                    <label>机构案件号：</label><label id="orgCasno"></label><br/>
                                    <label>入催日：</label><label id="rcr"></label><br/>
                                    <label>借款日期：</label><label id="jkrq"></label><br/>
                                    <label>欠款总金额：</label><label id="rmbQkzje" style="color: red"></label><br/>
                                    <label>每期还款金额：</label><label id="mqhkje"></label><br/>
                                    <label>应还本金：</label><label id="rmbYhbjzje"></label><br/>
                                    <label>应还费用：</label><label id="rmbYhfyzje"></label><br/>
                                    <label>还款状态：</label><label id="payStatus"></label>
                                </div>
                                <div class="collInfoTwo">
                                    <label>账单日：</label><label id="accountDate"></label><br/>
                                    <label>退案日：</label><label id="tar"></label><br/>
                                    <label>最近一次还款日：</label><label id="zhychkr"></label><br/>
                                    <label>最低应还金额：</label><label id="rmbZdyhje" style="color: red"></label><br/>
                                    <label>累计已还金额：</label><label id="ljyhje" ></label><br/>
                                    <label>应还利息：</label><label id="rmbYhlizje"></label><br/>
                                    <label>放款金额：</label><label id="borrowEd"></label><br/>
                                    <label>贷款到期日：</label><label id="lastLoanDate"></label>
                                </div>
                                <div class="collInfoThree">
                                    <label>逾期天数：</label><label id="overdueDays"></label><br/>
                                    <label>应还日期：</label><label id="firstYqjcDate"></label><br/>
                                    <label>逾期起始日：</label><label id="firstYqDate"></label><br/>
                                    <label>当期欠款金额：</label><label id="dqqkje"></label><br/>
                                    <label>已还期数：</label><label id="ykqs"></label><br/>
                                    <label>应还罚息：</label><label id="rmbYhfxzje"></label><br/>
                                    <label>滞纳金：</label><label id="znj"></label><br/>
                                    <label>最近还款金额：</label><label id="lastRepayAmount"></label>
                                </div>
                                <div class="collInfoFour">
                                    <label>借款卡号：</label><label id="borrowNo"></label><br/>
                                    <label>单位名称：</label><label id="workName"></label><br/>
                                    <label>工作部门：</label><label id="workDept"></label>

                                </div>
                                <div class="collInfoFive">
                                    <label>借款卡银行：</label><label id="borrowBlank"></label><br/>
                                    <label>电子邮箱：</label><label id="email"></label>

                                </div>
                                <div class="collInfoSix">
                                    <label>单位地址：</label><label id="workAddress"></label><br/>
                                    <label>住宅地址：</label><label id="customerHomeAddress"></label><br/>
                                    <label>户籍地址：</label><label id="registAddress"></label><br/>
                                    <label>身份证地址：</label><label id="certificateAddress"></label><br/>
                                    <label>账单地址：</label><label id="billAddress"></label><br/>
                                    <label>备注：</label><label id="assetsRemark"></label>
                                </div>
                                <div class="collInfoServer">
                                    <label>推荐商户：</label><span id="tjFirm"></span><br/>
                                    <label>商品信息：</label><label id="spxx"></label>
                                </div>
                                <div class="collInfoEight">
                                    <label>产品名称：</label><span id="cpmc"></span><br/>
                                    <label>商品价格：</label><label id="spjg"></label>
                                </div>
                                <div class="collInfoNine">
                                    <label>指定还款渠道1：</label><label id="zdhkqd1"></label><br/>
                                    <label>指定还款账号1：</label><span id="zdhkzh1"></span><br/>
                                    <label>指定还款账户户名1：</label><label id="zdhkzhhm1"></label><br/>
                                    <label>指定还款渠道2：</label><label id="zdhkqd2"></label><br/>
                                    <label>指定还款账号2：</label><span id="zdhkzh2"></span><br/>
                                    <label>指定还款账户户名2：</label><label id="zdhkzhhm2"></label>
                                </div>
                            </div>
                            <div class="lineY"></div>
                            <div class="collRightInfo">
                                <label>所属区域：</label><span id="areaCenter"></span><br/>
                                <label>所属城市：</label><span id="wwCityName" ></span><br/>
                                <label>推荐网点：</label><span id="tjWd"></span><br/>
                                <label>借款笔数：</label><span id="jkbs"></span><br/>
                                <label>还款方式：</label><span id="hkType"></span><br/>
                                <label>首付金额：</label><span id="sfje"></span><br/>
                                <label>分期期数：</label><span id="fz"></span><br/>
                                <label>年利率：</label><span id="yearRates"></span><br/>
                                <label>日利率：</label><span id="dayRates" style="text-align: left;"></span><br/>
                                <label>首逾标识：</label><span id="firstYqFlag" style="text-align: left;"></span><br/>
                                <label>逾期次数：</label><span id="sumYqcsHis" style="text-align: left;"></span><br/>
                                <label>最大逾期天数：</label><span id="maxYqtsHis" style="text-align: left;"></span><br/>
                                <label>累计逾期天数：</label><span id="sumYqtsHis" style="text-align: left;"></span><br/>
                                <label>委案次数：</label><span id="wacs" style="text-align: left;"></span><br/>
                                <label>罚息是否变化：</label><span id="fxsfbh" style="text-align: left;"></span><br/>
                                <label>考核目标：</label><span id="khmb" style="text-align: left;"></span><br/>
                                <label>贷款类型：</label><span id="dklx" style="text-align: left;"></span><br/>
                                <label>合同类型：</label><span id="htlx" style="text-align: left;"></span><br/>
                                <label>风险标签：</label><span id="fxFlag" style="text-align: left;"></span><br/>
                                <label>减免标签：</label><span id="jmbq" style="text-align: left;"></span><br/>
                                <label>法催标签：</label><span id="fcbq" style="text-align: left;"></span><br/>
                                <label>留案标签：</label><span id="laFlag" style="text-align: left;"></span><br/>
                                <label>账龄：</label><span id="accountAge" style="text-align: left;"></span><br/>
                                <label>呆账核销日期：</label><span id="dzhxrq" style="text-align: left;"></span>
                            </div>
                        </div>
                        <div id="tab-1" class="tab-pane">
                            <table id="duncaseAssignTable">
                                <tr>
                                    <th>催收员</th>
                                    <th>转移类型</th>
                                    <th>转移时间</th>
                                    <th>操作人员</th>
                                </tr>
                                <tbody id="duncaseAssignTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <table id="callContactTable">
                                <tr>
                                    <th>联系人</th>
                                    <th>联系方式</th>
                                    <th>关系</th>
                                    <th>电话码</th>
                                    <th>备注</th>
                                    <th>坐席</th>
                                    <th>通话时间</th>
                                    <th>拨打时间</th>
                                    <th>通话时长</th>
                                    <th>通话录音</th>
                                </tr>
                                <tbody id="callContactTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-3" class="tab-pane">
                            <table id="actionTable">
                                <tr>
                                    <th>行动码</th>
                                    <th>备注</th>
                                    <th>坐席</th>
                                    <th>操作时间</th>
                                </tr>
                                <tbody id = "actionTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-4" class="tab-pane">
                            <table id="repayHisTable">
                                <tr>
                                    <th>交易类型</th>
                                    <th>还款金额</th>
                                    <th>还款时间</th>
                                </tr>
                                <tbody id="repayHisTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-6" class="tab-pane">
                            <table id="custContactTable">
                                <tr>
                                    <th>联系人</th>
                                    <th>联系方式</th>
                                    <th>座机电话</th>
                                    <th>证件号码</th>
                                    <th>关系</th>
                                    <th>号码状态</th>
                                </tr>
                                <tbody id="custContactTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-7" class="tab-pane">
                            <table id="appendInfoTable">
                                <tbody id="appendInfoTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-8" class="tab-pane">
                            <table id="selectRecordTable">
                                <tr>
                                    <th>查找方式</th>
                                    <th>查找对象</th>
                                    <th>关系</th>
                                    <th>查找记录</th>
                                    <th>是否有效</th>
                                    <th>坐席</th>
                                    <th>创建时间</th>
                                </tr>
                                <tbody id="selectRecordTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-9" class="tab-pane">
                            <table id="inforeportingTable">
                                <tr>
                                    <th style="text-align: left">上报类型</th>
                                    <th style="text-align: left">申请金额</th>
                                    <th style="text-align: left">创建时间</th>
                                    <th style="text-align: left">申请原因</th>
                                    <th style="text-align: left">操作员</th>
                                </tr>
                                <tbody id="inforeportingTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-10" class="tab-pane">
                            <div style="margin-top: 10px;">
                                <b><span style="font-size: 18px;">委案金额合计:</span></b>
                                <b><span id="sameCaseArrearsTotal" style="color: red;font-size: 18px"></span><span style="font-size: 18px">元</span></b>&nbsp;&nbsp;&nbsp;&nbsp;
                                <b><span style="font-size: 18px;">结案应还金额合计:</span></b>
                                <b><span id="sameCaseCloseCaseYhjeTotal"  style="color: red;font-size: 18px"></span><span style="font-size: 18px">元</span></b>
                            </div>
                            <hr style="margin-top: 0;margin-bottom: 0;"/>
                            <div id="sameCaseInfoDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>


<th:block th:include="include :: footer"/>
<th:block th:include="include :: layout-latest-js"/>
<th:block th:include="include :: ztree-js"/>
<th:block th:include="include :: datetimepicker-js" />
<script th:inline="javascript">
    var prefix = ctx + "collect/task";
    var robotPrefix = ctx + "collect/robot";
    var letterPrefix = ctx + "coll/letter";
    var curAssetsPrefix = ctx + "import/assets";
    $(function () {
        var panehHidden = false;
        if ($(this).width() < 769) {
            panehHidden = true;
        }

        // 查询左边客户列表并显示第一个客户的数据
        collJobDetail();
        $(".ui-layout-center").css({"width":"100%"});
        $(".ui-layout-center").css({"height":"100%"});
    });

    function duncaseAssignList(caseNo){//获取案件历史轨迹
        $.post(
            prefix + "/duncaseAssignList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //
                    $("#duncaseAssignTrNew").html("");
                    var tp = $("#duncaseAssignTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+nullToEmpty(n.ownerName)+"</td><td>"+getTransferType(n.transferType)+"</td><td>"+n.createTime+"</td><td>"+n.operationName+"</td></tr>");
                    });
                }
            }
        );
    }

    function callRecordList(caseNo){//获取电催记录
        $.post(
            prefix + "/callRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充电催记录
                    // 添加table数据
                    $("#callContactTrNew").html("");
                    var tp = $("#callContactTrNew");
                    $.each(data, function (i, n) {
                        if (n.callRadioLocation != null && n.callRadioLocation != '') {
                            tp.append("<tr ondblclick='hiddenTr(this)'><td>"+n.contactName+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+getRelaByCode(n.contactRelation)+"</td><td>"+getCallSign(n.callSign,n.dictLabel)+"</td><td>"+getCallRecordRemark(n.remark,n.createBy,n.id,n.agentName)+"</td><td>"+n.agentName+"</td><td>"+nullToEmpty(n.callStartTime)+"</td><td>"+nullToEmpty(n.makeCallTime)+"</td><td>" +revert(nullToEmpty(n.callLen))+"</td>" +
                                "<td><a href='javascript:void(0)' onclick='listen("+n.id+")'><img src='/img/speaker.png'  class='imgso' width='20px' height='25px' alt='收听' title='收听'/></a>&nbsp;&nbsp;<a href='javascript:void(0)' onclick='downLoad("+n.id+")'><img src='/img/download.png'  class='imgso' width='20px' height='25px' alt='下载' title='下载'/></a></td></tr>");
                        } else {
                            tp.append("<tr ondblclick='hiddenTr(this)'><td>"+n.contactName+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+getRelaByCode(n.contactRelation)+"</td><td>"+getCallSign(n.callSign,n.dictLabel)+"</td><td>"+getCallRecordRemark(n.remark,n.createBy,n.id,n.agentName)+"</td><td>"+n.agentName+"</td><td>"+nullToEmpty(n.callStartTime)+"</td><td>"+nullToEmpty(n.makeCallTime)+"</td><td>"+nullToEmpty(n.callLen)+"</td>"+"<td></td></tr>");
                        }
                    });
                }
            }
        );
    }

    function hiddenTr(obj){
        var tp = $("#callContactTrNew");
        obj.style.display = "none";
    }

    function findAppendInfo(caseNo){//自由导入补充信息
        $.post(
            curAssetsPrefix + "/selectFreeImportList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充自由导入补充信息
                    // 添加table数据
                    $("#appendInfoTbody").html("");
                    var tp = $("#appendInfoTbody");
                    $.each(data, function (i, n) {
                        var value = n.value;
                        value = value.replace(/\},/g,'}<br/>');
                        tp.append("<tr><td colspan='2'>导入批次："+n.importBatchNo+"</td></tr>"+
                            "<tr><td style='border:0px;'></td><td style='border:0px;'>"+value+"</td></tr>");
                    });
                }
            }
        );
    }

    function listen(id){
        var url = prefix + '/recordAudio?id='+id;
        var width = "500";
        var height = "300";
        var options = {
            title: "播放窗口",
            width: width,
            height: height,
            maxmin:false,
            url: url,
            btn: ['关闭'],
            yes: function (index, layero) {
                layer.close(index);
            }
        };
        $.modal.openOptions(options);
    }

    function  actionRecordList(caseNo){//获取行动历史记录
        $.post(
            prefix + "/actionRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充行动历史记录
                    // 添加table数据
                    $("#actionTrNew").html("");
                    var tp = $("#actionTrNew");
                    $.each(data, function (i, n) {
                        var remark = "";
                        tp.append("<tr><td>"+getActionCodeAndName(n.actionCode,n.dictLabel)+"</td><td>"+nullToEmpty(n.remark)+"</td><td>"+n.agentName+"</td><td>"+n.createTime+"</td></tr>");
                    });
                }
            }
        );
    }
    function  repaymentList(caseNo){//读取还款历史信息
        $.post(
            prefix + "/repaymentList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){
                    $("#repayHisTrNew").html("");
                    var tp = $("#repayHisTrNew");
                    $.each(data, function (i, n) {
                        /*tp.append("<tr><td>"+n.jyType+"</td><td>"+n.jyje+"</td><td>"+n.hkrq+"</td></tr>");*/
                        tp.append("<tr><td>"+nullToEmpty(n.jyType)+"</td><td>"+nullToEmpty(n.hkje)+"</td><td>"+n.hkrq+"</td></tr>");
                    });
                }
            }
        );
    }

    /**
     * 查询共案信息
     * @param certificateNo
     * @param orgId
     */
    function  selectSameCaseInfo(certificateNo, orgId){
        $.post(
            prefix + "/selectSameCaseInfo",
            {
                certificateNo:certificateNo,
                orgId:orgId
            }, // 请求参数
            function(data) {
                if(data != null){
                    var tp = $("#sameCaseInfoDetail");
                    var sameCaseArrearsTotal = 0.00;
                    var sameCaseCloseCaseYhjeTotal = 0.00;
                    for (var i = 0; i < data.result.length; i++) {
                        sameCaseArrearsTotal += data.result[i].arrearsTotal;
                        sameCaseCloseCaseYhjeTotal += data.result[i].arrearsTotal;
                        var caseNo = data.result[i].caseNo != null ? data.result[i].caseNo : "";
                        var importBatchNo = data.result[i].importBatchNo != null ? data.result[i].importBatchNo : "";
                        var orgId = data.result[i].orgId != null ? data.result[i].orgId : "";
                        var arrearsTotal = data.result[i].arrearsTotal != null ? data.result[i].arrearsTotal : "";
                        var closeCaseYhje = data.result[i].closeCaseYhje != null ? data.result[i].closeCaseYhje : "";
                        var enterCollDate = data.result[i].enterCollDate != null ? data.result[i].enterCollDate : "";
                        var accountDate = data.result[i].accountDate != null ? data.result[i].accountDate : "";
                        var overdueDays = data.result[i].overdueDays != null ? data.result[i].overdueDays : "";
                        var jkrq = data.result[i].jkrq != null ? data.result[i].jkrq : "";
                        var backCaseDate = data.result[i].backCaseDate != null ? data.result[i].backCaseDate : "";
                        var firstYqjcDate = data.result[i].firstYqjcDate != null ? data.result[i].firstYqjcDate : "";
                        var rmbQkzje = data.result[i].rmbQkzje != null ? data.result[i].rmbQkzje : "";
                        var zhychkr = data.result[i].zhychkr != null ? data.result[i].zhychkr : "";
                        var firstOverdueTime = data.result[i].firstOverdueTime != null ? data.result[i].firstOverdueTime : "";
                        var mqhkje = data.result[i].mqhkje != null ? data.result[i].mqhkje : "";
                        var lowestPaymentRmb = data.result[i].lowestPaymentRmb != null ? data.result[i].lowestPaymentRmb : "";
                        var dqqkje = data.result[i].dqqkje != null ? data.result[i].dqqkje : "";
                        var rmbYhbjzje = data.result[i].rmbYhbjzje != null ? data.result[i].rmbYhbjzje : "";
                        var ljyhje = data.result[i].ljyhje != null ? data.result[i].ljyhje : "";
                        var ykqs = data.result[i].ykqs != null ? data.result[i].ykqs : "";
                        var rmbYhfyzje = data.result[i].rmbYhfyzje != null ? data.result[i].rmbYhfyzje : "";
                        var rmbYhlizje = data.result[i].rmbYhlizje != null ? data.result[i].rmbYhlizje : "";
                        var rmbYhfxzje = data.result[i].rmbYhfxzje != null ? data.result[i].rmbYhfxzje : "";
                        var znj = data.result[i].znj != null ? data.result[i].znj : "";
                        var borrowEd = data.result[i].borrowEd != null ? data.result[i].borrowEd : "";
                        var borrowNo = data.result[i].borrowNo != null ? data.result[i].borrowNo : "";
                        var borrowBlank = data.result[i].borrowBlank != null ? data.result[i].borrowBlank : "";
                        tp.append("<hr style=\"margin-top: 0;margin-bottom: 0;\"/><div class=\"sameCaseLeftInfo\">\n" +
                            "                                <div class=\"sameCaseOne\">\n" +
                            "                                    <label style='font-size: 14px;'><b>机构案件号：</b></label><b><label ><a href='javascript:void(0)' onclick='collJobDetail(\""+caseNo + "\",\""+orgId + "\",\""+importBatchNo+ "\")'><b><span style='font-size: 14px;color: #1c84c6'>"+caseNo+"</a></label></b><br/>\n" +
                            "                                    <label >入催日：</label><label  >"+enterCollDate+"</label><br/>\n" +
                            "                                    <label >借款日期：</label><label >"+jkrq+"</label><br/>\n" +
                            "                                    <label >欠款总金额：</label><label style='color: red;'>"+rmbQkzje+"</label><br/>\n" +
                            "                                    <label >每期还款金额：</label><label  >"+mqhkje+"</label><br/>\n" +
                            "                                    <label >应还本金：</label><label  >"+rmbYhbjzje+"</label><br/>\n" +
                            "                                    <label >应还费用：</label><label  >"+rmbYhfyzje+"</label><br/>\n" +
                            "                                    <label >滞纳金：</label><label  >"+znj+"</label><br/>\n" +
                            "                                    <label >借款卡号：</label><label  style='font-size: 18px;'>"+borrowNo+"</label>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"sameCaseTwo\">\n" +
                            "                                    <label style='font-size: 14px;'><b>委案金额：</b></label><label  style='font-size: 14px;'><b>"+arrearsTotal+"</b></label><br/>\n" +
                            "                                    <label >账单日：</label><label  >"+accountDate+"</label><br/>\n" +
                            "                                    <label >退案日：</label><label  >"+backCaseDate+"</label><br/>\n" +
                            "                                    <label >最近一次还款日：</label><label >"+zhychkr+"</label><br/>\n" +
                            "                                    <label >最低应还金额：</label><label  >"+lowestPaymentRmb+"</label><br/>\n" +
                            "                                    <label >累计已还金额：</label><label  >"+ljyhje+"</label><br/>\n" +
                            "                                    <label >应还利息：</label><label  >"+rmbYhlizje+"</label><br/>\n" +
                            "                                    <label >放款金额：</label><label  >"+borrowEd+"</label><br/>\n" +
                            "                                    <label >借款卡银行：</label><label  >"+borrowBlank+"</label>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"sameCaseThree\">\n" +
                            "                                    <label style='font-size: 14px;'><b>结案应还金额：</b></label><label  style='font-size: 14px;'><b>"+closeCaseYhje+"</b></label><br/>\n" +
                            "                                    <label >逾期天数：</label><label  >"+overdueDays+"</label><br/>\n" +
                            "                                    <label >应还日期：</label><label  >"+firstYqjcDate+"</label><br/>\n" +
                            "                                    <label >逾期起始日：</label><label  >"+firstOverdueTime+"</label><br/>\n" +
                            "                                    <label >当期欠款金额：</label><label  >"+dqqkje+"</label><br/>\n" +
                            "                                    <label >已还期数：</label><label  >"+ykqs+"</label><br/>\n" +
                            "                                    <label >应还罚息：</label><label  >"+rmbYhfxzje+"</label>\n" +
                            "                                </div></div>");
                    }
                    // $("#sameCaseArrearsTotal").text(sameCaseArrearsTotal);
                    $("#sameCaseArrearsTotal").text(parseFloat(sameCaseArrearsTotal).toFixed(2));
                    // $("#sameCaseCloseCaseYhjeTotal").text(sameCaseCloseCaseYhjeTotal);
                    $("#sameCaseCloseCaseYhjeTotal").text(parseFloat(sameCaseCloseCaseYhjeTotal).toFixed(2));
                }
            }
        );
    }

    function  custContactList(caseNo,orgId,importBatchNo){//读取联系人信息
        $.post(
            prefix + "/custContactList",     // 请求路径url
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            }, // 请求参数
            function(data) {
                if(data != null){
                    $("#custContactTbody").html("");
                    // 添加table数据
                    var tp = $("#custContactTbody");
                    $.each(data, function (i, n) {
                        if(n.phone != null && n.phone != ""){
                            tp.append("<tr><td>"+n.contactName+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+tellToMd5(n.tel)+"</td><td>"+cardToMd5(n.certificateNo)+"</td><td>"+getRelaByCode(n.relation)+"</td><td>"+convertStatus(n.phoneStatus)+"</td></tr>");
                        }
                        // if (n.tel != null && n.tel != ''){
                        //     tp.append("<tr><td>"+n.contactName+"</td><td>"+tellToMd5(n.tel)+"</td><td>"+cardToMd5(n.certificateNo)+"</td><td>"+getRelaByCode(n.relation)+"</td></tr>");
                        // }

                    });
                }
            }
        );
    }

    function  selectRecordList(caseNo){//获取查找记录
        $.post(
            prefix + "/selectRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充查找记录
                    // 添加table数据
                    $("#selectRecordTrNew").html("");
                    var tp = $("#selectRecordTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+getSearchTypeByCode(n.searchType,n.otherRemark) +"</td><td>"+nullToEmpty(n.objName)+"</td><td>"+getRelaByCode(n.contactRelation,n.otherContactRelation)+"</td>" +
                            "<td>"+nullToEmpty(n.content)+"</td><td>"+getValidateStatusByCode(n.validateStatus)+"</td><td>"+n.createName+"</td><td>"+n.createTime+"</td></tr>");
                    });
                }
            }
        );
    }

    function collJobDetail(caseNo, orgId, importBatchNo) {
        if (caseNo == null || caseNo == '') {
            caseNo = $("#firstEnterCaseNo").val();
        }
        if (orgId == null || orgId == '') {
            orgId = $("#firstOrgId").val();
        }
        if (importBatchNo == null || importBatchNo == '') {
            importBatchNo = $("#firstImportBatchNo").val();
        }
        var certificateNo = $("#firstCertificateNo").val();
        $.post(
            prefix + "/collJobDetail",     // 请求路径url
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            }, // 请求参数
            function(data) {
                if(data != null) {
                    if(data.assets != null){ //通过接口查询资产信息
                        $("#customName").text(data.assets.curName);//客户姓名
                        $("#customCertificateNo").text(cardToMd5(data.assets.certificateNo));//证件号码
                        $("#sex").text(getSexByCode(data.assets.curSex));//客户性别
                        $("#age").text(getAgeByCertificateNo(data.assets.certificateNo)+"岁");//年龄
                        $("#marrageStatus").text(getMarrageByCode(data.assets.marriage));//婚姻状况
                        $("#education").text(data.assets.education);//学历

                        $("#handSeparation").html(data.assets.transfertype);//手别
                        $("#arrearsTotal").html(data.assets.rmbYe == null ? data.assets.rmbYe : data.assets.rmbYe.toFixed(2));//委案金额
                        $("#closeCaseYhje").html(data.assets.waYe == null ? data.assets.waYe : data.assets.waYe.toFixed(2));//结案应还金额

                        $("#orgCasno").text(data.assets.orgCasno);//机构案件号
                        $("#orgCasnoTitle").text(data.assets.orgCasno);//机构案件号
                        $("#rcr").text(data.assets.rcr);//入催日
                        $("#jkrq").html(data.assets.jkrq);//借款日期
                        $("#rmbQkzje").text(data.assets.rmbQkzje == null ? data.assets.rmbQkzje : data.assets.rmbQkzje.toFixed(2));//欠款总金额
                        $("#mqhkje").html(data.assets.mqhkje); //每期还款金额
                        $("#rmbYhbjzje").text(data.assets.rmbYhbjzje == null ? data.assets.rmbYhbjzje : data.assets.rmbYhbjzje.toFixed(2));//应还本金
                        $("#rmbYhfyzje").text(data.assets.rmbYhfyzje == null ? data.assets.rmbYhfyzje : data.assets.rmbYhfyzje.toFixed(2));//应还费用
                        $("#accountDate").text(data.assets.accountDate);//账单日
                        $("#tar").text(data.assets.tar);//退案日
                        $("#zhychkr").html(data.assets.zhychkr);//最近一次还款日
                        $("#rmbZdyhje").text(data.assets.rmbZdyhje == null ? data.assets.rmbZdyhje : data.assets.rmbZdyhje.toFixed(2));//最低应还金额
                        $("#ljyhje").html(data.assets.ljyhje);//累计已还金额
                        $("#rmbYhlizje").text(data.assets.rmbYhlizje == null ? data.assets.rmbYhlizje : data.assets.rmbYhlizje.toFixed(2));//应还利息
                        $("#borrowEd").text(data.assets.borrowEd == null ? data.assets.borrowEd : data.assets.borrowEd.toFixed(2));//放款金额
                        $("#overdueDays").text(data.assets.overdueDays);//逾期天数
                        $("#firstYqjcDate").text(data.assets.firstYqjcDate);//应还日期
                        $("#firstYqDate").text(data.assets.firstYqDate);//逾期起始日
                        $("#dqqkje").html(data.assets.dqqkje);//当期欠款金额
                        $("#ykqs").html(data.assets.ykqs);//已还期数
                        $("#rmbYhfxzje").text(data.assets.rmbYhfxzje == null ? data.assets.rmbYhfxzje : data.assets.rmbYhfxzje.toFixed(2));//应还罚息
                        $("#znj").text(data.assets.znj == null ? data.assets.znj : data.assets.znj.toFixed(2));//滞纳金
                        $("#borrowNo").text(cardToMd5(data.assets.borrowNo));//借款卡号
                        $("#borrowBlank").text(data.assets.borrowBlank);//借款卡银行
                        $("#workName").text(data.assets.workName);//单位名称
                        $("#workDept").html(data.assets.workDept);//工作部门
                        $("#email").text(data.assets.email);//电子邮箱
                        $("#workAddress").text(data.assets.workAddress);//单位地址
                        $("#customerHomeAddress").text(data.assets.customerHomeAddress);//住宅地址
                        $("#registAddress").text(data.assets.registAddress);//户籍地址
                        $("#certificateAddress").text(data.assets.certificateAddress);//身份证地址
                        $("#billAddress").text(data.assets.billAddress);//账单地址
                        $("#assetsRemark").html(data.assets.remark);//备注
                        $("#tjFirm").text(data.assets.tjFirm);//推荐商户
                        $("#spxx").html(data.assets.spxx);//商品信息
                        $("#cpmc").text(data.assets.cpmc);//产品名称
                        $("#spjg").html(data.assets.spjg);//商品价格
                        $("#zdhkqd1").html(data.assets.zdhkqd1);//指定还款渠道1
                        $("#zdhkzh1").html(data.assets.zdhkzh1);//指定还款账户1
                        $("#zdhkqd2").html(data.assets.zdhkqd2);//指定环框渠道2
                        $("#zdhkzh2").html(data.assets.zdhkzh2);//指定还款账户2
                        $("#zdhkzhhm1").html(data.assets.zdhkzhhm1);//指定还款账户户名1
                        $("#zdhkzhhm2").html(data.assets.zdhkzhhm2);//指定还款账户户名2
                        $("#areaCenter").text(data.assets.areaCenter);//所属区域
                        $("#wwCityName").text(data.assets.wwCityName);//所属城市
                        $("#tjWd").text(data.assets.tjWd);//推荐网点
                        $("#jkbs").html(data.assets.jkbs);//借款笔数
                        $("#hkType").text(data.assets.hkType);//还款方式
                        $("#sfje").html(data.assets.sfje);//首付金额
                        $("#fz").text(data.assets.fz);//分期期数
                        $("#yearRates").text(data.assets.yearRates);//年利率
                        $("#dayRates").text(data.assets.dayRates);//日利率
                        $("#firstYqFlag").text(data.assets.firstYqFlag);//首逾标识
                        $("#sumYqcsHis").text(data.assets.sumYqcsHis);//逾期次数
                        $("#maxYqtsHis").text(data.assets.maxYqtsHis);//最大逾期天数
                        $("#sumYqtsHis").text(data.assets.sumYqtsHis);//累计逾期天数
                        $("#wacs").html(data.assets.wacs);//委案次数
                        $("#fxsfbh").html(data.assets.fxsfbh);//罚息是否变化
                        $("#khmb").html(data.assets.khmb);//考核目标
                        $("#dklx").text(data.assets.dklx);//贷款类型
                        $("#htlx").text(data.assets.htlx);//合同类型
                        $("#fxFlag").text(data.assets.fxFlag);//风险标签
                        $("#jmbq").text(data.assets.jmbq);//减免标签
                        $("#fcbq").text(data.assets.fcbq);//法催标签
                        $("#laFlag").text(data.assets.laFlag);//留案标签
                        $("#accountAge").html(data.assets.accountAge);//账龄
                        $("#payStatus").text(data.assets.payStatus);//还款状态
                        $("#lastLoanDate").text(data.assets.lastLoanDate);//贷款到期日
                        $("#lastRepayAmount").text(data.assets.lastRepayAmount);//最近还款金额
                        $("#dzhxrq").text(data.assets.dzhxrq);//呆账核销日期
                    }
                }
                disabledLetterApply(caseNo,orgId,importBatchNo);
                isSameCase(certificateNo,orgId);
            }
        );
    }

    /**
     * 是否共案
     * @param certificateNo
     * @param orgId
     */
    function isSameCase(certificateNo,orgId){
        $.post(
            prefix + "/selectSameCaseInfo",
            {
                certificateNo:certificateNo,
                orgId:orgId
            },
            function(data) {
                if(data.status == 200){
                    if (data.result.length > 1) {
                        $("#isSameCase").text("是");
                    } else {
                        $("#isSameCase").text("否");
                        document.getElementById("tab-10").style.display = "none";
                    }
                }
            }
        );
    }

    function disabledLetterApply(caseNo,orgId,importBatchNo){
        $.post(
            letterPrefix + "/letterStatus",
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            },
            function(data) {
                if(data.status == 200){
                    if (data.result.length != 0) {
                        if (data.result[0].applyStatus == 1) {
                            $("#letterStatus").text("待审批");
                        } else if (data.result[0].applyStatus == 2) {
                            $("#letterStatus").text("审批通过");
                        } else if (data.result[0].applyStatus == 3) {
                            $("#letterStatus").text("审批拒绝");
                        }
                    } else {
                        $("#letterStatus").text("");
                    }
                }
            }
        );
    }

    function viewTabDetail(tab){
        var currentCaseNo = $("#firstEnterCaseNo").val();
        var orgId = $("#firstOrgId").val();
        var importBatchNo = $("#firstImportBatchNo").val();
        var certificateNo = $("#firstCertificateNo").val();
        if (tab != 'sameCaseInfo') {
            document.getElementById("tab-10").style.display = "none";
        } else {
            var isSameCase = $("#isSameCase").text();
            if (isSameCase != null && isSameCase != '' && isSameCase == '是') {
                document.getElementById("tab-10").style.display = "block";
            }
        }
        if(tab == 'info'){//详细信息

        }else if(tab == 'locus' && $('#locus').val()=='0'){//案件历史轨迹
            $('#locus').val('1');
            duncaseAssignList(currentCaseNo);//获取案件历史轨迹
        }else if(tab == 'call' && $('#call').val()=='0'){//电催记录
            $('#call').val('1');
            callRecordList(currentCaseNo);//获取电催记录
        }else if(tab == 'action' && $('#action').val()=='0'){//行动历史
            $('#action').val('1');
            actionRecordList(currentCaseNo);//获取行动历史记录
        }else if(tab == 'repay' && $('#repay').val()=='0'){//还款历史
            $('#repay').val('1');
            repaymentList(currentCaseNo);//获取还款历史信息
        }else if(tab == 'add' && $('#add').val()=='0'){//补充信息
            $('#add').val('1');
            findAppendInfo(currentCaseNo);//获取自由导入补充信息
        }else if(tab == 'find' && $('#find').val()=='0'){//查找记录
            $('#find').val('1');
            selectRecordList(currentCaseNo);//获取查找记录
        }else if(tab == 'cust' && $('#cust').val()=='0'){//联系人
            $('#cust').val('1');
            custContactList(currentCaseNo,orgId,importBatchNo);//获取联系人信息
        }else if(tab == 'inforeporting' && $('#inforeporting').val()=='0'){//上报信息查找记录
            $('#inforeporting').val('1');
            selectInforeportingList();//获取上报信息记录
        }else if(tab == 'sameCaseInfo' && $('#sameCaseInfo').val()=='0'){//查找记录
            $('#sameCaseInfo').val('1');
            selectSameCaseInfo(certificateNo,orgId);//获取查找记录
        }

    }

    function  selectInforeportingList() {//获取上报信息记录
        var caseNo = $("#firstEnterCaseNo").val();
        var orgId = $("#firstOrgId").val();
        var importBatchNo = $("#firstImportBatchNo").val();
        $.ajax({
            url: ctx+'inforeporting/reduction/listAll',    //请求的url地址
            dataType: "json",   //返回格式为json
            async: false, //请求是否异步，默认为异步，这也是ajax重要特性
            data:
                {
                    "caseNo": caseNo,
                    "orgId": orgId,
                    "importBatchNo": importBatchNo
                },    //参数值
            type: "POST",   //请求方式
            success: function(data) {
                //请求成功时处理
                $("#inforeportingTbody").html("");
                var htm = "";
                $.each(data, function (i, n) {
                    htm+="<tr>";
                    htm+="<td>";
                    if(n.types==1){
                        htm+="减免";
                    }else if(n.types==2){
                        htm+="划扣";
                    }else{
                        htm+="对公入账";
                    }

                    htm+="</td>";
                    htm+="<td>";
                    htm+=parseFloat(n.arrearsTotal).toFixed(2);
                    htm+="</td>";
                    htm+="<td>";
                    htm+=n.createTime;
                    htm+="</td>";
                    htm+="<td>";
                    htm+=n.remark==null ? '' : n.remark;
                    htm+="</td>"
                    htm+="<td>";
                    htm+=n.createBy;
                    htm+="</td>";
                    htm+="</tr>";
                });
                $("#inforeportingTbody").html(htm);
            },
            error: function(e) {
                //请求出错处理
            }
        });
    }

    function getDestType(destDesc) {
        var destType = 3;
        if (destDesc && destDesc.length <= 6 && destDesc.substring(0, 1) != '0' &&
            destDesc.substring(0, 1) != '1' && destDesc.substring(0, 1) != '9') {
            destType = 1;
        }
        return destType;
    }

    function getCallSign(callSign, dictLabel) {
        if (dictLabel != null && dictLabel != '') {
            return callSign + "(" + dictLabel + ")";
        }
        return callSign;
    }

    function getActionCodeAndName(actionCode, dictLabel) {
        if (dictLabel != null && dictLabel != '') {
            return actionCode + "(" + dictLabel + ")";
        }
        if (actionCode == 'QXBJ') {
            return actionCode + "(取消标记)";
        }
        return actionCode;
    }


    function downLoad(id){
        window.location.href=prefix + "/downLoad?id="+id;
    }

    function getRelaByCode(relaCode,otherRemark) {
        var rela;
        if(relaCode == 1){
            rela = '本人';
        } else if(relaCode == 2){
            rela = '直系';
        } else if(relaCode == 3){
            rela = '亲戚';
        }else if(relaCode == 4){
            rela = '朋友';
        } else if(relaCode == 5){
            rela = '父母 ';
        } else if(relaCode == 6){
            rela = '配偶';
        }else if(relaCode == 7){
            rela = '兄弟';
        } else if(relaCode == 8){
            rela = '姐妹';
        } else if(relaCode == 9){
            rela = '哥哥';
        }else if(relaCode == 10){
            rela = '兄长';
        } else if(relaCode == 11){
            rela = '弟弟 ';
        } else if(relaCode == 12){
            rela = '姐姐';
        }else if(relaCode == 13){
            rela = '妹妹';
        }else if(relaCode == 14){
            rela = '家人';
        } else if(relaCode == 15){
            rela = '老公';
        } else if(relaCode == 16){
            rela = '老婆';
        } else if(relaCode == 17){
            rela = '同事';
        }else if(relaCode == 18){
            rela = '单位';
        }  else if(relaCode == -1){
            if(otherRemark != null){
                rela = '其它'  + '(' + otherRemark + ')';
            }else{
                rela = '其它';
            }
        }else {
            rela = '-'
        }
        return rela;
    }

    function getSearchTypeByCode(relaCode,otherRemark) {
        var rela;
        if(relaCode == 1){
            rela = '114';
        } else if(relaCode == 2){
            rela = '12580';
        } else if(relaCode == 3){
            rela = '天眼查';
        }else if(relaCode == 4){
            rela = '其他' + '(' + otherRemark + ')';
        } else {
            rela = '-';
        }
        return rela;
    }

    function getValidateStatusByCode(relaCode) {
        var rela;
        if(relaCode == 'Y'){
            rela = '是';
        } else if(relaCode == 'N'){
            rela = '否';
        }  else {
            rela = '-';
        }
        return rela;
    }

    function getCallSignByCode(callSignCode) {
        var callSign;
        if(callSignCode == 1){
            callSign = '承诺还款';
        } else if(callSignCode == 2){
            callSign = '谈判';
        } else if(callSignCode == 3){
            callSign = '半失联';
        }else if(callSignCode == 4){
            callSign = '拒绝还款';
        }else if(callSignCode == 5){
            callSign = '失联';
        }
        return callSign;
    }

    function getTransferType(type) {
        var transferType;
        if(type == 1){
            transferType = '初次生成';
        } else if(type == 2){
            transferType = '重新分派';
        } else if(type == 3){
            transferType = '临时代理';
        } else if(type == 4){
            transferType = '协助催收';
        } else if(type == 5){
            transferType = '临时代理回收';
        } else if(type == 6){
            transferType = '异常案件转分配';
        } else if(type == 7){
            transferType = '结案转移';
        } else if(type == 8){
            transferType = '灰色队列';
        } else if(type == 9){
            transferType = '从灰色队列移除';
        } else if(type == 10){
            transferType = '协助催收申请';
        } else if(type == 11){
            transferType = '停催申请';
        } else if(type == 12){
            transferType = '停止催收';
        } else if(type == 13){
            transferType = '停止催收激活';
        } else if(type == 14){
            transferType = '停止催收拒绝';
        } else if(type == 15){
            transferType = '拒绝协催';
        } else if(type == 16){
            transferType = '机器人协催';
        } else if(type == 17){
            transferType = '从机器人拉回';
        } else if(type == 18){
            transferType = '申请推送机器人';
        } else if(type == 19){
            transferType = '同意推送机器人';
        } else if(type == 20){
            transferType = '拒绝推送机器人';
        } else if(type == 21){
            transferType = '案件回收';
        }
        return transferType;
    }

    function getSexByCode(code) {
        var sex;
        if(code == 0 || code=="男"){
            sex = '男';
        } else if(code == 1 || code=="女"){
            sex = '女';
        } else {
            sex = '未知';
        }
        return sex;
    }

    function getMarrageByCode(code) {
        var marrage;
        if(code == 1 || code=="已婚"){
            marrage = '已婚';
        } else if(code == 2 || code=="未婚"){
            marrage = '未婚';
        } else if(code == 3 || code=="已婚"){
            marrage = '已婚';
        } else if(code == 4 || code=="未婚"){
            marrage = '未婚';
        } else if(code == 5 || code=="离异"){
            marrage = '离异';
        } else if(code == 6 || code=="离婚"){
            marrage = '离婚';
        } else if(code == 7 || code=="丧偶"){
            marrage = '丧偶';
        } else {
            marrage = '未知';
        }
        return marrage;
    }

    function getAgeByCertificateNo(certificateNo) {
        //获取年龄
        var myDate = new Date();
        var month = myDate.getMonth() + 1;
        var day = myDate.getDate();
        var age = myDate.getFullYear() - certificateNo.substring(6, 10) - 1;
        if (certificateNo.substring(10, 12) < month || certificateNo.substring(10, 12) == month && certificateNo.substring(12, 14) <= day) {
            age++;
        }
        return age;
    }

    function getActionCode(code) {
        if(code == 'ALPA'){
            code = '客户已还款并查到款项';
        } else if(code == 'CNHK'){
            code = '查到客户还款不足以退案';
        } else if(code == 'ZTGJ'){
            code = '死亡账户已发送死亡证明并报备';
        }else if(code == 'TS'){
            code = '客户称要报警/投诉';
        }else if(code == 'NXT'){
            code = '无还款诚意';
        }else if(code == 'DYZG'){
            code = '答应转告';
        }else if(code == 'ZCLX'){
            code = '再次联系';
        }
        return code;
    }

    function getCallRecordRemark(str,createBy,id,agentName) {
        if(str == null || str == "null" || str == undefined){
            str = "";
        }
        if (createBy == -1 || agentName == "机器人") {
            return "<a href='javascript:void(0)' onclick='viewCallContent(\""+id+"\")'>查看文本</a>";
        }
        return str;
    }

    // 机器人通话内容查看
    function viewCallContent(id) {
        var viewCallContentUrl = robotPrefix + '/toViewCallContent?id='+id;
        $.modal.open("通话内容", viewCallContentUrl);
    }

    function nullToEmpty(str){
        if(str == null || str == "" || str == "undefined"){
            str = "-";
        }
        return str;
    }

    function tellToMd5(tell){
        if(tell != null && tell != ""){
           // tell = tell.substring(0,3) + "****" + tell.substring(7);
        }else{
            tell = "";
        }
        return tell;
    }
    //银行卡、身份证脱敏
    function cardToMd5(cardno){
        if(cardno != null && cardno != ""){
            //cardno = cardno.substring(0,2) + "************" + cardno.substring(14);
        }else {
            cardno ="";
        }
        return cardno;
    }

    function nullToEmpty(str){
        if(str == null || str == "" || str == "undefined"){
            str = "-";
        }
        return str;
    }

    function revert(value) {
        if (value == null || value == '' || value==0) {
            return value;
        }
        value = Math.round(value);
        return value;
    }

    function convertStatus(obj){
        var result = '';
        if(obj=="2"||obj=="32"||obj=="33"){
            return result = "可联";
        }else if(obj=="31"){
            return result = "关机";
        }else if(obj=="4"){
            return result = "空号";
        }else if(obj=="5"){
            return result = "停机";
        }else if(obj=="11"){
            return result = "识别失败";
        }else if(obj=="91"){
            return result = "识别失败";
        }else if(obj =="-1"){
            result = "查询失败";
        }
        return result;
    }

</script>
</body>
</html>