<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="Cache-Control" content="no-store">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <link th:href="@{/css/agentcss/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/agentcss/agent-toolbar.css}" rel="stylesheet"/>

    <!--[if lt IE 9]>
    <script th:src="@{/ajax/libs/agentjs/html5shiv.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/respond.min.js}"></script>
    <![endif]-->


    <script th:src="@{/ajax/libs/agentjs/jquery.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/socket.io.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/agent-client.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/moment.min.js}"></script>
    <script th:src="@{/ajax/libs/agentjs/agent-toolbar.js}"></script>
    <script th:src="@{/js/reset.min.js}"></script>

    <!--自建话务平台需要引用的js-->
    <script th:src="@{/assets/js/jquery-1.10.2.min.js}"></script>
    <script th:src="@{/assets/js/layer/layer.js}"></script>
    <script th:src="@{/assets/js/SoftPhone.js}"></script>

    <script th:src="@{/assets/js/sockjs.js}"></script>
    <script th:src="@{/assets/js/callcenter.js}"></script>
    <th:block th:include="include :: header('催收作业页面')"/>
    <th:block th:include="include :: layout-latest-css"/>
    <th:block th:include="include :: ztree-css"/>

    <th:block th:include="include :: datetimepicker-css" />

    <style type="text/css">
        .sameCaseInfoDetail {
            position: relative;
            top: 10px;
        }
        .sameCaseValue {
            margin-right: 100px;
        }
        .textarea-inherit {
            width: 100%;
            overflow: auto;
            word-break: break-all; // 解决兼容问题
        }
    </style>

</head>

<body class="gray-bg">

<div class="ui-layout-west">
    <!--<input type="hidden" id="ownerId" name="ownerId" th:value="${tLcTask.ownerId}">-->
    <input type="hidden" id="orgId" name="orgId" th:value="${tLcTask.orgId}">
    <input type="hidden" id="certificateNo" name="certificateNo" th:value="${certificateNo}">
    <input type="hidden" id="firstEnterCaseNo" name="firstEnterCaseNo" th:value="${currentCaseNo}">
    <input type="hidden" id="firstImportBatchNo" name="firstImportBatchNo" th:value="${currentImportBatchNo}">
    <!--查询条件-->
    <input type="hidden" id="caseNoSearch" name="caseNoSearch" th:value="${tLcTask.caseNo}">
    <input type="hidden" id="customNameSearch" name="customNameSearch" th:value="${tLcTask.customName}">
    <input type="hidden" id="taskStatusSearch" name="taskStatusSearch" th:value="${tLcTask.taskStatus}">
    <input type="hidden" id="callCodeHistoryListStr" name="callCodeHistoryListStr" th:value="${callCodeHistoryListStr}">
<!--    <input type="hidden" id="taskTypeSearch" name="taskTypeSearch" th:value="${tLcTask.taskType}">
    <input type="hidden" id="startArrearsTotalSearch" name="startArrearsTotalSearch" th:value="${tLcTask.startArrearsTotal}">
    <input type="hidden" id="endArrearsTotalSearch" name="endArrearsTotalSearch" th:value="${tLcTask.endArrearsTotal}">
    <input type="hidden" id="callCodeSearch" name="callCodeSearch" th:value="${tLcTask.callCode}">
    <input type="hidden" id="transferTypeSearch" name="transferTypeSearch" th:value="${tLcTask.transferType}">
    <input type="hidden" id="phoneSearch" name="phoneSearch" th:value="${tLcTask.phone}">
    <input type="hidden" id="startCloseCaseYhjeSearch" name="startCloseCaseYhjeSearch" th:value="${tLcTask.startCloseCaseYhje}">
    <input type="hidden" id="endCloseCaseYhjeSearch" name="endCloseCaseYhjeSearch" th:value="${tLcTask.endCloseCaseYhje}">
    <input type="hidden" id="actionCodeSearch" name="actionCodeSearch" th:value="${tLcTask.actionCode}">
    <input type="hidden" id="startRecentlyAllotDateSearch" name="startRecentlyAllotDateSearch" th:value="${tLcTask.startRecentlyAllotDate}">
    <input type="hidden" id="endRecentlyAllotDateSearch" name="endRecentlyAllotDateSearch" th:value="${tLcTask.endRecentlyAllotDate}">
    <input type="hidden" id="startRecentlyFollowUpDateSearch" name="startRecentlyFollowUpDateSearch" th:value="${tLcTask.startRecentlyFollowUpDate}">
    <input type="hidden" id="endRecentlyFollowUpDateSearch" name="endRecentlyFollowUpDateSearch" th:value="${tLcTask.endRecentlyFollowUpDate}">

    <input type="hidden" id="startEnterCollDateSearch" name="startEnterCollDateSearch" th:value="${tLcTask.startEnterCollDate}">
    <input type="hidden" id="endEnterCollDateSearch" name="endEnterCollDateSearch" th:value="${tLcTask.endEnterCollDate}">
    <input type="hidden" id="productNameSearch" name="productNameSearch" th:value="${tLcTask.productName}">
    <input type="hidden" id="startDqyhjeSearch" name="startDqyhjeSearch" th:value="${tLcTask.startDqyhje}">
    <input type="hidden" id="endDqyhjeSearch" name="endDqyhjeSearch" th:value="${tLcTask.endDqyhje}">
    <input type="hidden" id="startLjyhjeSearch" name="startLjyhjeSearch" th:value="${tLcTask.startLjyhje}">
    <input type="hidden" id="endLjyhjeSearch" name="endLjyhjeSearch" th:value="${tLcTask.endLjyhje}">
    <input type="hidden" id="startOverdueDaysSearch" name="startOverdueDaysSearch" th:value="${tLcTask.startOverdueDays}">
    <input type="hidden" id="endOverdueDaysSearch" name="endOverdueDaysSearch" th:value="${tLcTask.endOverdueDays}">-->
    <input type="hidden" id="province" name="province" th:value="${tLcTask.province}">
    <input type="hidden" id="city" name="city" th:value="${tLcTask.city}">
    <input type="hidden" id="freeSQL" name="freeSQL" th:value="${tLcTask.freeSQL}">
    <input type="hidden" id="phoneStatus" name="phoneStatus" th:value="${tLcTask.phoneStatus}">
    <input type="hidden" id="totalCaseNum" name="totalCaseNum" th:value="${totalCaseNum}">
    <input type="hidden" id="totalArrears" name="totalArrears" th:value="${totalArrears}">
    <input type="hidden" id="startNum" name="startNum" value="1">

    <div class="box box-main">
        <div  id="leftTopDiv" class="box-header" style="height: 30px">
            <div class="box-title">
                <i class="fa icon-grid" style="font-weight: bold;">客户列表</i>
            </div>
        </div>
        <div  id="leftMidDiv" class="ui-layout-content" style="height: 458px;">

            <div id="customNameList">
                <ul class="dropdown-menu dropdown-user">
                </ul>
            </div>
            <div id="more">
                <ul class="dropdown-menu dropdown-user">
                </ul>
            </div>
        </div>

        <div  id="leftBotDiv" class="box-header"  style="height: 60px">
            <div class="row">
                <div  class="sumDiv">合计：</div>
            </div>
            <div class="row">
                <div class="listDiv" id="customCount">&nbsp;</div>
            </div>
            <div class="row">
                <div class="listDiv" id="allCustomTotalDebtAmount" style="text-align: right">&nbsp;</div>
            </div>
        </div>

    </div>
</div>

<div class="ui-layout-center" >
    <div class="container-div" style="overflow: hidden">
        <div class="row">
            <div class="col-sm-12 search-collapse" id="baseInfoDiv" style="height: 105px">
                <h4 class="form-header h4">基本信息 | <label id="orgCasno"></label></h4>
                <div class="collImgdiv">
                    <img src="/img/icontouxiang.png" class="imgso" width="30px" height="45px"/>
                </div>
                <div class="collBaseInfoMid">
                    <b><span id="customName" style="color: #3593e0;font-size: 24px;" ></span></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <b>&nbsp;&nbsp;<span id="handSeparation"  style="font-size: 24px;"></span></b><br/>
                    <span id="sex" style="font-size: 18px;"></span>|
                    <span id="age" style="font-size: 18px;"></span>|
                    <span id="marrageStatus" style="font-size: 18px;"></span>|
                    <span id="education" style="font-size: 18px;"></span>
                </div>
                <div class="collBaseInfoRight" style="width:500px;">
                    <span id="customCertificateNo"   style="font-size: 16px;"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 16px;">信函:</span>
                    <span id="letterStatus"  style="font-size: 16px;"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 16px;">共案:</span>
                    <span id="isSameCase"  style="color: red;font-size: 16px;"></span><br/>
                    <b><span style="font-size: 18px;">委案金额:</span></b>
                    <b><span id="arrearsTotal" style="color: red;font-size: 18px"></span>元</b>&nbsp;&nbsp;&nbsp;&nbsp;
                    <b><span style="font-size: 18px;">结案应还金额:</span></b>
                    <b><span id="closeCaseYhje"  style="color: red;font-size: 18px"></span>元</b>
                </div>
            </div>
            <div class="col-sm-12 search-collapse" id="detailInfoDiv"  style="height: calc(100% - 110px);overflow: auto">
                <div class="tabs-container" >
                    <ul class="nav nav-tabs">
                        <li class="active" id="infoLi"><a data-toggle="tab" href="#tab-5" aria-expanded="true" onclick="viewTabDetail('info')">详细信息</a><input type="hidden" id="info" value="1"></li>
                        <li class=""><a data-toggle="tab" href="#tab-1" aria-expanded="false" onclick="viewTabDetail('locus')">案件历史轨迹</a><input type="hidden" id="locus" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false" onclick="viewTabDetail('call')">电催记录</a><input type="hidden" id="call" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-3" aria-expanded="false" onclick="viewTabDetail('action')">行动历史</a><input type="hidden" id="action" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-4" aria-expanded="false" onclick="viewTabDetail('repay')">还款历史</a><input type="hidden" id="repay" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-6" aria-expanded="false" onclick="viewTabDetail('cust')">联系人</a><input type="hidden" id="cust" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-7" aria-expanded="false" onclick="viewTabDetail('add')">补充信息</a><input type="hidden" id="add" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-8" aria-expanded="false" onclick="viewTabDetail('find')">查找记录</a><input type="hidden" id="find" value="0"></li>
                        <li class=""><a data-toggle="tab" href="#tab-9" aria-expanded="false" onclick="viewTabDetail('inforeporting')">信息上报</a><input type="hidden" id="inforeporting" value="0"></li>
                        <li class="" id="sameCaseLi" ><a data-toggle="tab" href="#tab-10" aria-expanded="false" onclick="viewTabDetail('sameCaseInfo')">共案信息</a><input type="hidden" id="sameCaseInfo" value="0"></li>

                    </ul>
                    <div id="tabDiv" class="tab-content tabDiv">
                        <div id="tab-5" class="tab-pane active">
                            <div class="collLeftInfo">
                                <div class="collInfoOne">
                                    <!--<label>机构案件号：</label><label id="orgCasno"></label><br/>-->
                                    <label style="color: red;font-weight:bold">入催日：</label><label id="rcr" style="color: red;font-weight:bold"></label><br/>
                                    <label>借款日期：</label><label id="jkrq"></label><br/>
                                    <label style="color: red;font-weight:bold">欠款总金额：</label><label id="rmbQkzje"  style="color: red;font-weight:bold"></label><br/>
                                    <label>每期还款金额：</label><label id="mqhkje"></label><br/>
                                    <label style="color: red;font-weight:bold">应还本金：</label><label id="rmbYhbjzje" style="color: red;font-weight:bold"></label><br/>
                                    <label>应还费用：</label><label id="rmbYhfyzje"></label><br/>
                                    <label>滞纳金：</label><label id="znj"></label><br/>
                                    <label>还款状态：</label><label id="payStatus"></label>
                                </div>
                                <div class="collInfoTwo">
                                    <label>账单日：</label><label id="accountDate"></label><br/>
                                    <label style="color: red;font-weight:bold">退案日：</label><label id="tar" style="color: red;font-weight:bold"></label><br/>
                                    <label>最近一次还款日：</label><label id="zhychkr"></label><br/>
                                    <label  style="color: red;font-weight:bold">最低应还金额：</label><label id="rmbZdyhje" style="color: red;font-weight:bold"></label><br/>
                                    <label>累计已还金额：</label><label id="ljyhje" ></label><br/>
                                    <label>应还利息：</label><label id="rmbYhlizje"></label><br/>
                                    <label>放款金额：</label><label id="borrowEd"></label><br/>
                                    <label>贷款到期日：</label><label id="lastLoanDate"></label>
                                </div>
                                <div class="collInfoThree">
                                    <label style="color: red;font-weight:bold">逾期天数：</label><label id="overdueDays" style="color: red;font-weight:bold"></label><br/>
                                    <label>应还日期：</label><label id="firstYqjcDate"></label><br/>
                                    <label>逾期起始日：</label><label id="firstYqDate"></label><br/>
                                    <label>当期欠款金额：</label><label id="dqqkje"></label><br/>
                                    <label>已还期数：</label><label id="ykqs"></label><br/>
                                    <label>应还罚息：</label><label id="rmbYhfxzje"></label><br/>
                                    <label>最近还款金额：</label><label id="lastRepayAmount"></label>

                                </div>
                                <div class="collInfoFour">
                                    <label>借款卡号：</label><label id="borrowNo"></label><br/>
                                    <label>单位名称：</label><label id="workName"></label><br/>
                                    <label>工作部门：</label><label id="workDept"></label>

                                </div>
                                <div class="collInfoFive">
                                    <label>借款卡银行：</label><label id="borrowBlank"></label><br/>
                                    <label>电子邮箱：</label><label id="email"></label>

                                </div>
                                <div class="collInfoSix">
                                    <label>单位地址：</label><label id="workAddress"></label><br/>
                                    <label>住宅地址：</label><label id="customerHomeAddress"></label><br/>
                                    <label>户籍地址：</label><label id="registAddress"></label><br/>
                                    <label>身份证地址：</label><label id="certificateAddress"></label><br/>
                                    <label>账单地址：</label><label id="billAddress"></label><br/>
                                    <label>备注：</label><label id="assetsRemark"></label>
                                </div>
                                <div class="collInfoServer">
                                    <label>推荐商户：</label><span id="tjFirm"></span><br/>
                                    <label>商品信息：</label><label id="spxx"></label>
                                </div>
                                <div class="collInfoEight">
                                    <label>产品名称：</label><span id="cpmc"></span><br/>
                                    <label>商品价格：</label><label id="spjg"></label>
                                </div>
                                <div class="collInfoNine">
                                    <label>指定还款渠道1：</label><label id="zdhkqd1"></label><br/>
                                    <label>指定还款账号1：</label><span id="zdhkzh1"></span><br/>
                                    <label>指定还款账户户名1：</label><label id="zdhkzhhm1"></label><br/>
                                    <label>指定还款渠道2：</label><label id="zdhkqd2"></label><br/>
                                    <label>指定还款账号2：</label><span id="zdhkzh2"></span><br/>
                                    <label>指定还款账户户名2：</label><label id="zdhkzhhm2"></label>
                                </div>
                            </div>
                            <div class="lineY"></div>
                            <div class="collRightInfo">
                                <label>所属区域：</label><span id="areaCenter"></span><br/>
                                <label>所属城市：</label><span id="wwCityName" ></span><br/>
                                <label>推荐网点：</label><span id="tjWd"></span><br/>
                                <label>借款笔数：</label><span id="jkbs"></span><br/>
                                <label>还款方式：</label><span id="hkType"></span><br/>
                                <label>首付金额：</label><span id="sfje"></span><br/>
                                <label>分期期数：</label><span id="fz"></span><br/>
                                <label>年利率：</label><span id="yearRates"></span><br/>
                                <label>日利率：</label><span id="dayRates" style="text-align: left;"></span><br/>
                                <label>首逾标识：</label><span id="firstYqFlag" style="text-align: left;"></span><br/>
                                <label>逾期次数：</label><span id="sumYqcsHis" style="text-align: left;"></span><br/>
                                <label>最大逾期天数：</label><span id="maxYqtsHis" style="text-align: left;"></span><br/>
                                <label>累计逾期天数：</label><span id="sumYqtsHis" style="text-align: left;"></span><br/>
                                <label>委案次数：</label><span id="wacs" style="text-align: left;"></span><br/>
                                <label>罚息是否变化：</label><span id="fxsfbh" style="text-align: left;"></span><br/>
                                <label>考核目标：</label><span id="khmb" style="text-align: left;"></span><br/>
                                <label>贷款类型：</label><span id="dklx" style="text-align: left;"></span><br/>
                                <label>合同类型：</label><span id="htlx" style="text-align: left;"></span><br/>
                                <label>风险标签：</label><span id="fxFlag" style="text-align: left;"></span><br/>
                                <label>减免标签：</label><span id="jmbq" style="text-align: left;"></span><br/>
                                <label>法催标签：</label><span id="fcbq" style="text-align: left;"></span><br/>
                                <label>留案标签：</label><span id="laFlag" style="text-align: left;"></span><br/>
                                <label>账龄：</label><span id="accountAge" style="text-align: left;"></span><br/>
                                <label>呆账核销日期：</label><span id="dzhxrq" style="text-align: left;"></span>
                            </div>
                        </div>
                        <div id="tab-1" class="tab-pane">
                            <table id="duncaseAssignTable">
                                <tr>
                                    <th>催收员</th>
                                    <th>转移类型</th>
                                    <th>转移时间</th>
                                    <th>操作人员</th>
                                </tr>
                                <tbody id="duncaseAssignTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <table id="callContactTable">
                                <tr>
                                    <th>联系人</th>
                                    <th>联系方式</th>
                                    <th>关系</th>
                                    <th>电话码</th>
                                    <th>查账日期</th>
                                    <th>备注</th>
                                    <th>坐席</th>
                                    <th>通话时间</th>
                                    <th>拨打时间</th>
                                    <th>通话时长</th>
                                    <th>通话录音</th>
                                </tr>
                                <tbody id="callContactTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-3" class="tab-pane">
                            <table id="actionTable">
                                <tr>
                                    <th>行动码</th>
                                    <th>备注</th>
                                    <th>坐席</th>
                                    <th>操作时间</th>
                                </tr>
                                <tbody id = "actionTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-4" class="tab-pane">
                            <table id="repayHisTable">
                                <tr>
                                    <th>交易类型</th>
                                    <th>还款金额</th>
                                    <th>还款时间</th>
                                </tr>
                                <tbody id="repayHisTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-6" class="tab-pane">
                            <table id="custContactTable">
                                <tr>
                                    <th>联系人</th>
                                    <th>联系方式</th>
                                    <th>座机电话</th>
                                    <th>证件号码</th>
                                    <th>关系</th>
                                    <th>号码状态</th>
                                </tr>
                                <tbody id="custContactTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-7" class="tab-pane">
                            <table id="appendInfoTable">
                                <tbody id="appendInfoTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-8" class="tab-pane">
                            <table id="selectRecordTable">
                                <tr>
                                    <th>查找方式</th>
                                    <th>查找对象</th>
                                    <th>关系</th>
                                    <th>查找记录</th>
                                    <th>是否有效</th>
                                    <th>坐席</th>
                                    <th>创建时间</th>
                                </tr>
                                <tbody id="selectRecordTrNew"></tbody>
                            </table>
                        </div>
                        <div id="tab-9" class="tab-pane">
                            <table id="inforeportingTable">
                                <tr>
                                    <th style="text-align: left">上报类型</th>
                                    <th style="text-align: left">申请金额</th>
                                    <th style="text-align: left">创建时间</th>
                                    <th style="text-align: left">申请原因</th>
                                    <th style="text-align: left">操作员</th>
                                </tr>
                                <tbody id="inforeportingTbody"></tbody>
                            </table>
                        </div>
                        <div id="tab-10" class="tab-pane">
                            <div style="margin-top: 10px;">
                                <b><span style="font-size: 18px;">委案金额合计:</span></b>
                                <b><span id="sameCaseArrearsTotal" style="color: red;font-size: 18px"></span><span style="font-size: 18px">元</span></b>&nbsp;&nbsp;&nbsp;&nbsp;
                                <b><span style="font-size: 18px;">结案应还金额合计:</span></b>
                                <b><span id="sameCaseCloseCaseYhjeTotal"  style="color: red;font-size: 18px"></span><span style="font-size: 18px">元</span></b>
                            </div>
                            <hr style="margin-top: 0;margin-bottom: 0;"/>
                            <div id="sameCaseInfoDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<th:block th:include="include :: footer"/>
<th:block th:include="include :: layout-latest-js"/>
<th:block th:include="include :: ztree-js"/>
<th:block th:include="include :: datetimepicker-js" />
<script th:inline="javascript">
    // var currentCertificateNo; // 点击上一条和下一条按钮时使用，记录当前的客户的证件编号
    var currentCaseNo; // 点击上一条和下一条按钮时使用，记录当前的案件编号
    var currentImportBatchNo; // 点击上一条和下一条按钮时使用，记录当前的案件编号
    var currentOrgId; // 点击上一条和下一条按钮时使用，记录当前的案件编号
    var currentCertificateNo; //新增联系人时使用
    // var allCertificateNo = new Array(); // 点击上一条和下一条按钮时使用，存放所有客户的证件编号
    var allCaseNo = new Array(); // 点击上一条和下一条按钮时使用，存放所有案件编号
    var allOrgId = new Array(); // 点击上一条和下一条按钮时使用，存放所有机构号
    var allImportBatchNo = new Array(); // 点击上一条和下一条按钮时使用，存放所有案件导入批次号
    var currentTaskId;
    //var currentDuncaseNo;
    var editFlag = [[${@permission.hasPermi('system:user:edit')}]];
    var removeFlag = [[${@permission.hasPermi('system:user:remove')}]];
    var resetPwdFlag = [[${@permission.hasPermi('system:user:resetPwd')}]];
    var prefix = ctx + "collect/task";
    var letterPrefix = ctx + "coll/letter";
    var duncaseActionPrefix = ctx + "collect/duncase/action";
    var contactPrefix = ctx + "collect/cust/contact";
    var taskPrefix = ctx + "collect/task";
    var robotPrefix = ctx + "collect/robot";
    var curAssetsPrefix = ctx + "import/assets";
    var startNum = 1;
    var pageSize = 50;
    var agentIsCalling;
    $(function () {
        var panehHidden = false;
        if ($(this).width() < 769) {
            panehHidden = true;
        }
        $('body').layout({initClosed: panehHidden, west__size: 185});
        // 查询左边客户列表并显示第一个客户的数据
        findTaskByOwner(startNum,pageSize);
        // 设置左边div的宽度
        $(".ui-layout-west").css({"width":"10%"});
        $(".ui-layout-west").css({"overflow":"visible"});
        $(".ui-layout-west").css({"height":"100%"});
        // 设置右边div的宽度
        $(".ui-layout-east").css({"width":"26%"});
        $(".ui-layout-east").css({"overflow":"visible"});
        $(".ui-layout-east").css({"height":"100%"});
        // 设置中间div的宽度
        $(".ui-layout-center").css({"left": "10%","width":"90%"});
        $(".ui-layout-center").css({"height":"100%"});
        // 设置左右缩回栏的位置
        //ui-layout-resizer ui-layout-resizer-east ui-layout-resizer-open ui-layout-resizer-east-open
        $(".ui-layout-resizer-east").hide();
        $(".ui-layout-resizer-west").hide();

        $("input[name='cnhkDate']").datetimepicker({
            format: "yyyy-mm-dd hh:ii:ss",
            autoclose: true
        });
    });


   /* // 点击事件change
    $('input[type=radio][name=radioChoose]').change(function () {
        // 获取input radio选中值，方法一
        var myvalue = $('input:radio[name="radioChoose"]:checked').val();
        // 获取input radio选中值，方法二
        var myvalue = $(this).val();
    });*/


    function findTaskByOwner(startNum,pageSize) {//获取案件用户列表
        var customName= $("#customNameSearch").val();
        var taskStatus= $("#taskStatusSearch").val();
        var callCodeHistoryListStr = $("#callCodeHistoryListStr").val();
        var freeSQL = $("#freeSQL").val();
        var province = $("#province").val();
        var city = $("#city").val();
        var currentCaseNo = $("#firstEnterCaseNo").val();
        var currentImportBatchNo = $("#firstImportBatchNo").val();
        var phoneStatus = $("#phoneStatus").val();
        $.post(
            prefix + "/findTaskByOwner2",     // 请求路径url
            {
                caseNo:$("#caseNoSearch").val(),
                orgId:$("#orgId").val(),
                customName: customName,
                callCodeHistoryListStr : callCodeHistoryListStr,
                freeSQL:freeSQL,
                province : province,
                city : city,
                taskStatus : taskStatus,
                phoneStatus : phoneStatus,
                startNum: $("#startNum").val(),
                endNum: pageSize
            }, // 请求参数
            function(data) {
                if(data != null){
                    var str = "";
                    var allCustomTotalDebtAmount = 0.00;
                    var num = 0;
                    var tp = $("#customNameList");

                    $.each(data, function (i, n) {
                        var style = "";
                        if(n.recentlyFollowUpDate != null && getFormatDate(n.recentlyFollowUpDate) >= getFormatDate(new Date())){
                            style ="background:rgb(169,169,169)";
                        }
                        tp.append("<li id='cust"+n.caseNo+"' style='"+style+"'><a href='javascript:void(0)' onclick='collJobDetail(\""+n.caseNo + "\",\""+n.orgId + "\",\""+n.importBatchNo + "\")'</a>" + n.customName + "</li>");
                        allCustomTotalDebtAmount += n.arrearsTotal;
                        num++;
                        allCaseNo.push(n.caseNo);
                        allOrgId.push(n.orgId);
                        allImportBatchNo.push(n.importBatchNo);
                        if(num == 1 && ($("#firstEnterCaseNo").val() == null || $("#firstEnterCaseNo").val() == '')){
                            $("#firstEnterCaseNo").val(n.caseNo);
                            $("#orgId").val(n.orgId);
                            $("#firstImportBatchNo").val(n.importBatchNo)
                        }
                    });
                    var more = $("#more");
                    startNum = parseInt($("#startNum").val()) + 1;
                    $("#startNum").val(startNum)
                    if (startNum == 2) {
                        more.append("<a href='javascript:void(0)' onclick='findTaskByOwner(startNum,pageSize)'</a>更多</li>");
                    }
                    var totalPage;
                    if ((parseInt($("#totalCaseNum").val()) % pageSize) == 0) {
                        totalPage =  parseInt($("#totalCaseNum").val()) / pageSize;
                    } else {
                        totalPage = parseInt($("#totalCaseNum").val()) / pageSize + 1;
                    }
                    if (startNum > totalPage) {
                        $("#more").remove();
                    }
                    $("#customCount").text($("#totalCaseNum").val() + "件");
                    $("#allCustomTotalDebtAmount").text(parseFloat($("#totalArrears").val()).toFixed(2) + "元");
                    // $("#allCustomTotalDebtAmount").text(allCustomTotalDebtAmount.toFixed(2) + "元");
                    collJobDetail($("#firstEnterCaseNo").val(),$("#orgId").val(),$("#firstImportBatchNo").val());

                }
            }
        );
    }

    function duncaseAssignList(caseNo){//获取案件历史轨迹
        $.post(
            prefix + "/duncaseAssignList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //
                    $("#duncaseAssignTrNew").html("");
                    var tp = $("#duncaseAssignTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+nullToEmpty(n.ownerName)+"</td><td>"+getTransferType(n.transferType)+"</td><td>"+n.createTime+"</td><td>"+n.operationName+"</td></tr>");
                    });
                }
            }
        );
    }

    function findAppendInfo(caseNo){//自由导入补充信息
        $.post(
            curAssetsPrefix + "/selectFreeImportList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充自由导入补充信息
                    // 添加table数据
                    $("#appendInfoTbody").html("");
                    var tp = $("#appendInfoTbody");
                    $.each(data, function (i, n) {
                        var value = n.value;
                        value = value.replace(/\},/g,'}<br/>');
                        tp.append("<tr><td colspan='2'>导入批次："+n.importBatchNo+"</td></tr>"+
                            "<tr><td style='border:0px;'></td><td style='border:0px;'>"+value+"</td></tr>");
                    });
                }
            }
        );
    }

    function callRecordList(caseNo){//获取电催记录
        $.post(
            prefix + "/callRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充电催记录
                    // 添加table数据
                    $("#callContactTrNew").html("");
                    var tp = $("#callContactTrNew");
                    $.each(data, function (i, n) {
                        if (n.callRadioLocation != null && n.callRadioLocation != '') {
                            tp.append("<tr><td>"+nullToEmpty(n.contactName)+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+getRelaByCode(n.contactRelation)+"</td><td>"+getCallSign(n.id,n.callSign,n.dictLabel)+"</td><td>"+nullToEmpty(n.findDate)+"</td><td>"+getCallRecordRemark(n.remark,n.createBy,n.id,n.agentName)+"</td><td>"+n.agentName+"</td><td>"+nullToEmpty(n.callStartTime)+"</td><td>"+nullToEmpty(n.makeCallTime)+"</td><td>" +revert(nullToEmpty(n.callLen))+"</td>" +
                                "<td><a href='javascript:void(0)' onclick='listen("+n.id+")'><img src='/img/speaker.png'  class='imgso' width='20px' height='25px' alt='收听' title='收听'/></a>&nbsp;&nbsp;<a href='javascript:void(0)' onclick='downLoad("+n.id+")'><img src='/img/download.png'  class='imgso' width='20px' height='25px' alt='下载' title='下载'/></a></td></tr>");
                        } else {
                            tp.append("<tr><td>"+nullToEmpty(n.contactName)+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+getRelaByCode(n.contactRelation)+"</td><td>"+getCallSign(n.id,n.callSign,n.dictLabel)+"</td><td>"+nullToEmpty(n.findDate)+"</td><td>"+getCallRecordRemark(n.remark,n.createBy,n.id,n.agentName)+"</td><td>"+n.agentName+"</td><td>"+nullToEmpty(n.callStartTime)+"</td><td>"+nullToEmpty(n.makeCallTime)+"</td><td>"+nullToEmpty(n.callLen)+"</td>"+"<td></td></tr>");
                        }
                    });
                }
            }
        );
    }

    function  actionRecordList(caseNo){//获取行动历史记录
        $.post(
            prefix + "/actionRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充行动历史记录
                    // 添加table数据
                    $("#actionTrNew").html("");
                    var tp = $("#actionTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+getActionCodeAndName(n.actionCode,n.dictLabel)+"</td><td>"+nullToEmpty(n.remark)+"</td><td>"+n.agentName+"</td><td>"+n.createTime+"</td></tr>");
                    });
                }
            }
        );
    }

    function  custContactList(caseNo,orgId,importBatchNo){//读取联系人信息
        $.post(
            prefix + "/custContactList",     // 请求路径url
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            }, // 请求参数
            function(data) {
                if(data != null){
                    $("#custContactTbody").html("");
                    // 添加table数据
                    var tp = $("#custContactTbody");
                    $.each(data, function (i, n) {
                        if(n.phone != null && n.phone != ""){
                            tp.append("<tr><td>"+n.contactName+"</td><td>"+tellToMd5(n.phone)+"</td><td>"+tellToMd5(n.tel)+"</td><td>"+cardToMd5(n.certificateNo)+"</td><td>"+getRelaByCode(n.relation)+"</td><td>"+convertStatus(n.phoneStatus)+"</td></tr>");
                        }
                    });
               }
            }
        );
    }

    function  repaymentList(caseNo){//读取还款历史信息
        $.post(
            prefix + "/repaymentList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){
                    $("#repayHisTrNew").html("");
                    var tp = $("#repayHisTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+nullToEmpty(n.jyType)+"</td><td>"+nullToEmpty(n.hkje)+"</td><td>"+n.hkrq+"</td></tr>");
                    });
                }
            }
        );
    }

    /**
     * 查询共案信息
     * @param certificateNo
     * @param orgId
     */
    function  selectSameCaseInfo(certificateNo, orgId){
        $.post(
            prefix + "/selectSameCaseInfo",
            {
                certificateNo:certificateNo,
                orgId:orgId
            }, // 请求参数
            function(data) {
                $("#sameCaseInfoDetail").html("");
                if(data != null){
                    var tp = $("#sameCaseInfoDetail");
                    var sameCaseArrearsTotal = 0.00;
                    var sameCaseCloseCaseYhjeTotal = 0.00;
                    for (var i = 0; i < data.result.length; i++) {
                        sameCaseArrearsTotal += data.result[i].arrearsTotal;
                        sameCaseCloseCaseYhjeTotal += data.result[i].arrearsTotal;
                        var caseNo = data.result[i].caseNo != null ? data.result[i].caseNo : "";
                        var importBatchNo = data.result[i].importBatchNo != null ? data.result[i].importBatchNo : "";
                        var orgId = data.result[i].orgId != null ? data.result[i].orgId : "";
                        var arrearsTotal = data.result[i].arrearsTotal != null ? data.result[i].arrearsTotal : "";
                        var closeCaseYhje = data.result[i].closeCaseYhje != null ? data.result[i].closeCaseYhje : "";
                        var enterCollDate = data.result[i].enterCollDate != null ? data.result[i].enterCollDate : "";
                        var accountDate = data.result[i].accountDate != null ? data.result[i].accountDate : "";
                        var overdueDays = data.result[i].overdueDays != null ? data.result[i].overdueDays : "";
                        var jkrq = data.result[i].jkrq != null ? data.result[i].jkrq : "";
                        var backCaseDate = data.result[i].backCaseDate != null ? data.result[i].backCaseDate : "";
                        var firstYqjcDate = data.result[i].firstYqjcDate != null ? data.result[i].firstYqjcDate : "";
                        var rmbQkzje = data.result[i].rmbQkzje != null ? data.result[i].rmbQkzje : "";
                        var zhychkr = data.result[i].zhychkr != null ? data.result[i].zhychkr : "";
                        var firstOverdueTime = data.result[i].firstOverdueTime != null ? data.result[i].firstOverdueTime : "";
                        var mqhkje = data.result[i].mqhkje != null ? data.result[i].mqhkje : "";
                        var lowestPaymentRmb = data.result[i].lowestPaymentRmb != null ? data.result[i].lowestPaymentRmb : "";
                        var dqqkje = data.result[i].dqqkje != null ? data.result[i].dqqkje : "";
                        var rmbYhbjzje = data.result[i].rmbYhbjzje != null ? data.result[i].rmbYhbjzje : "";
                        var ljyhje = data.result[i].ljyhje != null ? data.result[i].ljyhje : "";
                        var ykqs = data.result[i].ykqs != null ? data.result[i].ykqs : "";
                        var rmbYhfyzje = data.result[i].rmbYhfyzje != null ? data.result[i].rmbYhfyzje : "";
                        var rmbYhlizje = data.result[i].rmbYhlizje != null ? data.result[i].rmbYhlizje : "";
                        var rmbYhfxzje = data.result[i].rmbYhfxzje != null ? data.result[i].rmbYhfxzje : "";
                        var znj = data.result[i].znj != null ? data.result[i].znj : "";
                        var borrowEd = data.result[i].borrowEd != null ? data.result[i].borrowEd : "";
                        var borrowNo = data.result[i].borrowNo != null ? data.result[i].borrowNo : "";
                        var borrowBlank = data.result[i].borrowBlank != null ? data.result[i].borrowBlank : "";
                        tp.append("<hr style=\"margin-top: 0;margin-bottom: 0;\"/><div class=\"sameCaseLeftInfo\">\n" +
                            "                                <div class=\"sameCaseOne\">\n" +
                            "                                    <label style='font-size: 14px;'><b>机构案件号：</b></label><b><label ><a href='javascript:void(0)' onclick='collJobDetail(\""+caseNo + "\",\""+orgId + "\",\""+importBatchNo+ "\")'><b><span style='font-size: 14px;color: #1c84c6'>"+caseNo+"</a></label></b><br/>\n" +
                            "                                    <label >入催日：</label><label  >"+enterCollDate+"</label><br/>\n" +
                            "                                    <label >借款日期：</label><label >"+jkrq+"</label><br/>\n" +
                            "                                    <label >欠款总金额：</label><label style='color: red;'>"+rmbQkzje+"</label><br/>\n" +
                            "                                    <label >每期还款金额：</label><label  >"+mqhkje+"</label><br/>\n" +
                            "                                    <label >应还本金：</label><label  >"+rmbYhbjzje+"</label><br/>\n" +
                            "                                    <label >应还费用：</label><label  >"+rmbYhfyzje+"</label><br/>\n" +
                            "                                    <label >滞纳金：</label><label  >"+znj+"</label><br/>\n" +
                            "                                    <label >借款卡号：</label><label  style='font-size: 18px;'>"+borrowNo+"</label>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"sameCaseTwo\">\n" +
                            "                                    <label style='font-size: 14px;'><b>委案金额：</b></label><label  style='font-size: 14px;'><b>"+arrearsTotal+"</b></label><br/>\n" +
                            "                                    <label >账单日：</label><label  >"+accountDate+"</label><br/>\n" +
                            "                                    <label >退案日：</label><label  >"+backCaseDate+"</label><br/>\n" +
                            "                                    <label >最近一次还款日：</label><label >"+zhychkr+"</label><br/>\n" +
                            "                                    <label >最低应还金额：</label><label  >"+lowestPaymentRmb+"</label><br/>\n" +
                            "                                    <label >累计已还金额：</label><label  >"+ljyhje+"</label><br/>\n" +
                            "                                    <label >应还利息：</label><label  >"+rmbYhlizje+"</label><br/>\n" +
                            "                                    <label >放款金额：</label><label  >"+borrowEd+"</label><br/>\n" +
                            "                                    <label >借款卡银行：</label><label  >"+borrowBlank+"</label>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"sameCaseThree\">\n" +
                            "                                    <label style='font-size: 14px;'><b>结案应还金额：</b></label><label  style='font-size: 14px;'><b>"+closeCaseYhje+"</b></label><br/>\n" +
                            "                                    <label >逾期天数：</label><label  >"+overdueDays+"</label><br/>\n" +
                            "                                    <label >应还日期：</label><label  >"+firstYqjcDate+"</label><br/>\n" +
                            "                                    <label >逾期起始日：</label><label  >"+firstOverdueTime+"</label><br/>\n" +
                            "                                    <label >当期欠款金额：</label><label  >"+dqqkje+"</label><br/>\n" +
                            "                                    <label >已还期数：</label><label  >"+ykqs+"</label><br/>\n" +
                            "                                    <label >应还罚息：</label><label  >"+rmbYhfxzje+"</label>\n" +
                            "                                </div></div>");
                    }
                    // $("#sameCaseArrearsTotal").text(sameCaseArrearsTotal);
                    $("#sameCaseArrearsTotal").text(parseFloat(sameCaseArrearsTotal).toFixed(2));
                    // $("#sameCaseCloseCaseYhjeTotal").text(sameCaseCloseCaseYhjeTotal);
                    $("#sameCaseCloseCaseYhjeTotal").text(parseFloat(sameCaseCloseCaseYhjeTotal).toFixed(2));
                }
            }
        );
    }

    function disabledLetterApply(caseNo,orgId,importBatchNo){
        $.post(
            letterPrefix + "/letterStatus",
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            },
            function(data) {
                if(data.status == 200){
                    // for (var i = 0; i < data.result.length; i++) {
                    //     if (data.result[i].applyStatus == 1) {
                    //         document.getElementById("letterApply").disabled=true;
                    //         $("#letterStatus").text("待审批");
                    //         break;
                    //     }
                    // }
                    if (data.result.length != 0) {
                        if (data.result[0].applyStatus == 1) {
                            // document.getElementById("letterApply").disabled=true;
                            $("#letterStatus").text("待审批");
                        } else if (data.result[0].applyStatus == 2) {
                            $("#letterStatus").text("审批通过");
                        } else if (data.result[0].applyStatus == 3) {
                            $("#letterStatus").text("审批拒绝");
                        }
                    } else {
                        $("#letterStatus").text("");

                    }
                }
            }
        );
    }

    /**
     * 是否共案
     * @param certificateNo
     * @param orgId
     */
    function isSameCase(certificateNo,orgId){
        $.post(
            prefix + "/selectSameCaseInfo",
            {
                certificateNo:certificateNo,
                orgId:orgId
            },
            function(data) {
                if(data.status == 200){
                    if (data.result.length > 1) {
                        $("#isSameCase").text("是");
                        // document.getElementById("tab-9").style.display = "block";
                        // document.getElementById("sameCaseLi").style.display = "block";
                        // $("#sameCaseLi").removeClass('active');
                        // $("#tab-9").removeClass("active");
                        // $("#infoLi").addClass("active");
                        // $("#tab-9").removeClass("active");
                        // $("#tab-5").addClass("active");
                    } else {
                        $("#isSameCase").text("否");
                        document.getElementById("tab-9").style.display = "none";
                        // document.getElementById("sameCaseLi").style.display = "none";
                        // document.getElementById("tab-9").style.display = "none";
                        // $("#infoLi").addClass("active");
                        // // $("#tab-9").removeClass("active");
                        // $("#tab-5").addClass("active");
                    }
                }
                // $("a[aria-expanded='true']").click();
            }
        );
    }

    function  selectInforeportingList() {//获取查找记录
        $.ajax({
            url: ctx+'inforeporting/reduction/listAll',    //请求的url地址
            dataType: "json",   //返回格式为json
            async: false, //请求是否异步，默认为异步，这也是ajax重要特性
            data:
                {
                    "caseNo": currentCaseNo,
                    "orgId": currentOrgId,
                    "importBatchNo": currentImportBatchNo
                },    //参数值
            type: "POST",   //请求方式
            success: function(data) {
                //请求成功时处理
                $("#inforeportingTbody").html("");
                var htm = "";
                $.each(data, function (i, n) {
                    htm+="<tr>";
                    htm+="<td>";
                    if(n.types==1){
                        htm+="减免";
                    }else if(n.types==2){
                        htm+="划扣";
                    }else{
                        htm+="对公入账";
                    }

                    htm+="</td>";
                    htm+="<td>";
                    htm+=parseFloat(n.arrearsTotal).toFixed(2);
                    htm+="</td>";
                    htm+="<td>";
                    htm+=n.createTime;
                    htm+="</td>";
                    htm+="<td>";
                    htm+=n.remark==null ? '' : n.remark;
                    htm+="</td>"
                    htm+="<td>";
                    htm+=n.createBy;
                    htm+="</td>";
                    htm+="</tr>";
                });
                $("#inforeportingTbody").html(htm);
            },
            error: function(e) {
                //请求出错处理
            }
        });
    }

    function  selectRecordList(caseNo){//获取查找记录
        $.post(
            prefix + "/selectRecordList",     // 请求路径url
            {
                caseNo:caseNo
            }, // 请求参数
            function(data) {
                if(data != null){ //填充查找记录
                    // 添加table数据
                    $("#selectRecordTrNew").html("");
                    var tp = $("#selectRecordTrNew");
                    $.each(data, function (i, n) {
                        tp.append("<tr><td>"+getSearchTypeByCode(n.searchType,n.otherRemark) +"</td><td>"+nullToEmpty(n.objName)+"</td><td>"+getRelaByCode(n.contactRelation,n.otherContactRelation)+"</td>" +
                            "<td>"+nullToEmpty(n.content)+"</td><td>"+getValidateStatusByCode(n.validateStatus)+"</td><td>"+n.createName+"</td><td>"+n.createTime+"</td></tr>");
                    });
                }
            }
        );
    }

    function collJobDetail(caseNo,orgId,importBatchNo) {
        currentCaseNo = caseNo;
        currentImportBatchNo = importBatchNo;
        currentOrgId = orgId;
        $("#cust" +caseNo).prop("style","background:#EAEDF1");
        $.post(
            prefix + "/collJobDetail",     // 请求路径url
            {
                caseNo:caseNo,
                orgId:orgId,
                importBatchNo:importBatchNo
            }, // 请求参数
            function(data) {
                if (data.code == 1) {
                    window.location.href="/login";
                    return;
                }
                if(data != null) {
                    if(data.assets != null){ //通过接口查询资产信息
                        $("#customName").text(data.assets.curName);//客户姓名
                        currentCertificateNo = data.assets.certificateNo;
                        $("#customCertificateNo").text(data.assets.certificateNo);//证件号码
                        $("#sex").text(getSexByCode(data.assets.curSex));//客户性别
                        $("#age").text(getAgeByCertificateNo(data.assets.certificateNo)+"岁");//年龄
                        $("#marrageStatus").text(getMarrageByCode(data.assets.marriage));//婚姻状况
                        $("#education").text(data.assets.education);//学历

                        $("#handSeparation").html(data.assets.transfertype);//手别
                        $("#arrearsTotal").html(data.assets.rmbYe == null ? data.assets.rmbYe : data.assets.rmbYe.toFixed(2));//委案金额
                        $("#closeCaseYhje").html(data.assets.waYe == null ? data.assets.waYe : data.assets.waYe.toFixed(2));//结案应还金额

                        $("#orgCasno").text(data.assets.orgCasno);//机构案件号
                        $("#rcr").text(data.assets.rcr);//入催日
                        $("#jkrq").html(data.assets.jkrq);//借款日期
                        $("#rmbQkzje").text(data.assets.rmbQkzje == null ? data.assets.rmbQkzje : data.assets.rmbQkzje.toFixed(2));//欠款总金额
                        $("#mqhkje").html(data.assets.mqhkje); //每期还款金额
                        $("#rmbYhbjzje").text(data.assets.rmbYhbjzje == null ? data.assets.rmbYhbjzje : data.assets.rmbYhbjzje.toFixed(2));//应还本金
                        $("#rmbYhfyzje").text(data.assets.rmbYhfyzje == null ? data.assets.rmbYhfyzje : data.assets.rmbYhfyzje.toFixed(2));//应还费用
                        $("#accountDate").text(data.assets.accountDate);//账单日
                        $("#tar").text(data.assets.tar);//退案日
                        $("#zhychkr").html(data.assets.zhychkr);//最近一次还款日
                        $("#rmbZdyhje").text(data.assets.rmbZdyhje == null ? data.assets.rmbZdyhje : data.assets.rmbZdyhje.toFixed(2));//最低应还金额
                        $("#ljyhje").html(data.assets.ljyhje);//累计已还金额
                        $("#rmbYhlizje").text(data.assets.rmbYhlizje == null ? data.assets.rmbYhlizje : data.assets.rmbYhlizje.toFixed(2));//应还利息
                        $("#borrowEd").text(data.assets.borrowEd == null ? data.assets.borrowEd : data.assets.borrowEd.toFixed(2));//放款金额
                        $("#overdueDays").text(data.assets.overdueDays);//逾期天数
                        $("#firstYqjcDate").text(data.assets.firstYqjcDate);//应还日期
                        $("#firstYqDate").text(data.assets.firstYqDate);//逾期起始日
                        $("#dqqkje").html(data.assets.dqqkje);//当期欠款金额
                        $("#ykqs").html(data.assets.ykqs);//已还期数
                        $("#rmbYhfxzje").text(data.assets.rmbYhfxzje == null ? data.assets.rmbYhfxzje : data.assets.rmbYhfxzje.toFixed(2));//应还罚息
                        $("#znj").text(data.assets.znj == null ? data.assets.znj : data.assets.znj.toFixed(2));//滞纳金
                        $("#borrowNo").text(data.assets.borrowNo);//借款卡号
                        $("#borrowBlank").text(data.assets.borrowBlank);//借款卡银行
                        $("#workName").text(data.assets.workName);//单位名称
                        $("#workDept").html(data.assets.workDept);//工作部门
                        $("#email").text(data.assets.email);//电子邮箱
                        $("#workAddress").text(data.assets.workAddress);//单位地址
                        $("#customerHomeAddress").text(data.assets.customerHomeAddress);//住宅地址
                        $("#registAddress").text(data.assets.registAddress);//户籍地址
                        $("#certificateAddress").text(data.assets.certificateAddress);//身份证地址
                        $("#billAddress").text(data.assets.billAddress);//账单地址
                        $("#assetsRemark").html(data.assets.remark);//备注
                        $("#tjFirm").text(data.assets.tjFirm);//推荐商户
                        $("#spxx").html(data.assets.spxx);//商品信息
                        $("#cpmc").text(data.assets.cpmc);//产品名称
                        $("#spjg").html(data.assets.spjg);//商品价格
                        $("#zdhkqd1").html(data.assets.zdhkqd1);//指定还款渠道1
                        $("#zdhkzh1").html(data.assets.zdhkzh1);//指定还款账户1
                        $("#zdhkqd2").html(data.assets.zdhkqd2);//指定环框渠道2
                        $("#zdhkzh2").html(data.assets.zdhkzh2);//指定还款账户2
                        $("#zdhkzhhm1").html(data.assets.zdhkzhhm1);//指定还款账户户名1
                        $("#zdhkzhhm2").html(data.assets.zdhkzhhm2);//指定还款账户户名2
                        $("#areaCenter").text(data.assets.areaCenter);//所属区域
                        $("#wwCityName").text(data.assets.wwCityName);//所属城市
                        $("#tjWd").text(data.assets.tjWd);//推荐网点
                        $("#jkbs").html(data.assets.jkbs);//借款笔数
                        $("#hkType").text(data.assets.hkType);//还款方式
                        $("#sfje").html(data.assets.sfje);//首付金额
                        $("#fz").text(data.assets.fz);//分期期数
                        $("#yearRates").text(data.assets.yearRates);//年利率
                        $("#dayRates").text(data.assets.dayRates);//日利率
                        $("#firstYqFlag").text(data.assets.firstYqFlag);//首逾标识
                        $("#sumYqcsHis").text(data.assets.sumYqcsHis);//逾期次数
                        $("#maxYqtsHis").text(data.assets.maxYqtsHis);//最大逾期天数
                        $("#sumYqtsHis").text(data.assets.sumYqtsHis);//累计逾期天数
                        $("#wacs").html(data.assets.wacs);//委案次数
                        $("#fxsfbh").html(data.assets.fxsfbh);//罚息是否变化
                        $("#khmb").html(data.assets.khmb);//考核目标
                        $("#dklx").text(data.assets.dklx);//贷款类型
                        $("#htlx").text(data.assets.htlx);//合同类型
                        $("#fxFlag").text(data.assets.fxFlag);//风险标签
                        $("#jmbq").text(data.assets.jmbq);//减免标签
                        $("#fcbq").text(data.assets.fcbq);//法催标签
                        $("#laFlag").text(data.assets.laFlag);//留案标签
                        $("#accountAge").html(data.assets.accountAge);//账龄
                        $("#payStatus").text(data.assets.payStatus);//还款状态
                        $("#lastLoanDate").text(data.assets.lastLoanDate);//贷款到期日
                        $("#lastRepayAmount").text(data.assets.lastRepayAmount);//最近还款金额
                        $("#dzhxrq").text(data.assets.dzhxrq);//呆账核销日期
                    }
                    custContactList(currentCaseNo,currentOrgId,currentImportBatchNo);//获取联系人信息
                    $('#locus').val('0');
                    $('#call').val('0');
                    $('#action').val('0');
                    $('#repay').val('0');
                    $('#cust').val('0');
                    $('#add').val('0');
                    $('#find').val('0');
                    $('#inforeporting').val('0');
                    $('#sameCaseInfo').val('0');
                    // document.getElementById("letterApply").disabled=false;
                    disabledLetterApply(currentCaseNo,currentOrgId,currentImportBatchNo);
                    isSameCase(currentCertificateNo,currentOrgId);
                    $("a[aria-expanded='true']").click();
                    // $("#sameCaseLi").removeClass('active');
                    // $("#infoLi").addClass("active");
                    // $("#tab-9").removeClass("active");
                    // $("#tab-5").addClass("active");
                    // viewTabDetail("sameCaseInfo");
                }
            }
        );
        //清空电话码和行动码
        $("#callStartTime").val("");
        $("#callEndTime").val("");
        $("#callLen").val("");
        $("#callRadioLocation").val("");
        $("#callCode").val("");
        $("#findDate").val("");
        $("#callRemarkAdd").val("");
        $("#cnhkDate").val("");
        $("#zclxDate").val("");
        $("#actionRemark").val("");
        $("#actionCode").val("");
    }

    function viewTabDetail(tab){
        if (tab != 'sameCaseInfo') {
            document.getElementById("tab-10").style.display = "none";
        } else {
            var isSameCase = $("#isSameCase").text();
            if (isSameCase != null && isSameCase != '' && isSameCase == '是') {
                document.getElementById("tab-10").style.display = "block";
            }
        }
        if(tab == 'info'){//详细信息

        }else if(tab == 'locus' && $('#locus').val()=='0'){//案件历史轨迹
            $('#locus').val('1');
            duncaseAssignList(currentCaseNo);//获取案件历史轨迹
        }else if(tab == 'call' && $('#call').val()=='0'){//电催记录
            $('#call').val('1');
            callRecordList(currentCaseNo);//获取电催记录
        }else if(tab == 'action' && $('#action').val()=='0'){//行动历史
            $('#action').val('1');
            actionRecordList(currentCaseNo);//获取行动历史记录
        }else if(tab == 'repay' && $('#repay').val()=='0'){//还款历史
            $('#repay').val('1');
            repaymentList(currentCaseNo);//获取联系人信息
        }else if(tab == 'cust' && $('#cust').val()=='0'){//联系人
            $('#cust').val('1');
            custContactList(currentCaseNo,currentOrgId,currentImportBatchNo);//获取还款历史信息
        }else if(tab == 'add' && $('#add').val()=='0'){//补充信息
            $('#add').val('1');
            findAppendInfo(currentCaseNo);//获取自由导入补充信息
        }else if(tab == 'find' && $('#find').val()=='0'){//查找记录
            $('#find').val('1');
            selectRecordList(currentCaseNo);//获取查找记录
        }else if(tab == 'inforeporting' && $('#inforeporting').val()=='0'){//查找记录
            $('#inforeporting').val('1');
            selectInforeportingList();//获取查找记录
        }else if(tab == 'sameCaseInfo' && $('#sameCaseInfo').val()=='0'){//查找记录
            $('#sameCaseInfo').val('1');
            selectSameCaseInfo(currentCertificateNo,currentOrgId);//获取查找记录
        }

    }


   var reset = new Reset(window);
   reset.resetByClass("ui-layout-resizer ui-layout-resizer-east ui-layout-resizer-open ui-layout-resizer-east-open","ui-layout-resizer ui-layout-resizer-west ui-layout-resizer-open ui-layout-resizer-west-open");

    function listen(id){
        var url = prefix + '/recordAudio?id='+id;
        var width = "500";
        var height = "300";
        var options = {
            title: "播放窗口",
            width: width,
            height: height,
            maxmin:false,
            url: url,
            btn: ['关闭'],
            yes: function (index, layero) {
                layer.close(index);
            }
        };
        $.modal.openOptions(options);
    }


    function downLoad(id){
        window.location.href=prefix + "/downLoad?id="+id;
    }

    function getRelaByCode(relaCode,otherRemark) {
        var rela;
        if(relaCode == 1){
            rela = '本人';
        } else if(relaCode == 2){
            rela = '直系';
        } else if(relaCode == 3){
            rela = '亲戚';
        }else if(relaCode == 4){
            rela = '朋友';
        } else if(relaCode == 5){
            rela = '父母 ';
        } else if(relaCode == 6){
            rela = '配偶';
        }else if(relaCode == 7){
            rela = '兄弟';
        } else if(relaCode == 8){
            rela = '姐妹';
        } else if(relaCode == 9){
            rela = '哥哥';
        }else if(relaCode == 10){
            rela = '兄长';
        } else if(relaCode == 11){
            rela = '弟弟 ';
        } else if(relaCode == 12){
            rela = '姐姐';
        }else if(relaCode == 13){
            rela = '妹妹';
        }else if(relaCode == 14){
            rela = '家人';
        } else if(relaCode == 15){
            rela = '老公';
        } else if(relaCode == 16){
            rela = '老婆';
        } else if(relaCode == 17){
            rela = '同事';
        }else if(relaCode == 18){
            rela = '单位';
        } else if(relaCode == -1){
            if(otherRemark != null){
                rela = '其它'  + '(' + otherRemark + ')';
            }else{
                rela = '其它';
            }
        }else {
            rela = '-';
        }
        return rela;
    }

    function getSearchTypeByCode(relaCode,otherRemark) {
        var rela;
        if(relaCode == 1){
            rela = '114';
        } else if(relaCode == 2){
            rela = '12580';
        } else if(relaCode == 3){
            rela = '天眼查';
        }else if(relaCode == 4){
            rela = '其他' + '(' + otherRemark + ')';
        } else {
            rela = '-';
        }
        return rela;
    }

    function getValidateStatusByCode(relaCode) {
        var rela;
        if(relaCode == 'Y'){
            rela = '是';
        } else if(relaCode == 'N'){
            rela = '否';
        }  else {
            rela = '-';
        }
        return rela;
    }

    /*function getCallSign(id, callSign, dictLabel) {
        if (callSign == null || callSign == '') {
            // return "<a href='javascript:void(0)' onclick='updateCallSign(\""+id+"\")'>待更新</a>";
            return "<a onclick='showModal(\""+id+"\")'>待更新</a>";
        }
        if (callSign == 'R01' || callSign == 'R02') {
            // return "<a href='javascript:void(0)' onclick='updateCallSign(\""+id+"\")'>待更新</a>";
            return "<a onclick='showModal(\""+id+"\")'>"+callSign+"("+dictLabel+")</a>";
        }
        if (dictLabel != null && dictLabel != '') {
            return callSign + "(" + dictLabel + ")";
        }
        return callSign;
    }*/

    function getCallSign(id, callSign, dictLabel) {
        if (dictLabel != null && dictLabel != '') {
            return callSign + "(" + dictLabel + ")";
        }
        return callSign;
    }



    function getActionCodeAndName(actionCode, dictLabel) {
        if (dictLabel != null && dictLabel != '') {
            return actionCode + "(" + dictLabel + ")";
        }
        if (actionCode == 'QXBJ') {
            return actionCode + "(取消标记)";
        }
        return actionCode;
    }

    function getTransferType(type) {
        var transferType;
        if(type == 1){
            transferType = '初次生成';
        } else if(type == 2){
            transferType = '重新分派';
        } else if(type == 3){
            transferType = '临时代理';
        } else if(type == 4){
            transferType = '协助催收';
        } else if(type == 5){
            transferType = '临时代理回收';
        } else if(type == 6){
            transferType = '异常案件转分配';
        } else if(type == 7){
            transferType = '结案转移';
        } else if(type == 8){
            transferType = '灰色队列';
        } else if(type == 9){
            transferType = '从灰色队列移除';
        } else if(type == 10){
            transferType = '协助催收申请';
        } else if(type == 11){
            transferType = '停催申请';
        } else if(type == 12){
            transferType = '停止催收';
        } else if(type == 13){
            transferType = '停止催收激活';
        } else if(type == 14){
            transferType = '停止催收拒绝';
        } else if(type == 15){
            transferType = '拒绝协催';
        } else if(type == 16){
            transferType = '机器人协催';
        } else if(type == 17){
            transferType = '从机器人拉回';
        } else if(type == 18){
            transferType = '申请推送机器人';
        } else if(type == 19){
            transferType = '同意推送机器人';
        } else if(type == 20){
            transferType = '拒绝推送机器人';
        } else if(type == 21){
            transferType = '案件回收';
        }
        return transferType;
    }

    function getSexByCode(code) {
        var sex;
        if(code == 0 || code=="男"){
            sex = '男';
        } else if(code == 1 || code=="女"){
            sex = '女';
        } else {
            sex = '未知';
        }
        return sex;
    }

    function getMarrageByCode(code) {
        var marrage;
        if(code == 1 || code=="已婚"){
            marrage = '已婚';
        } else if(code == 2 || code=="未婚"){
            marrage = '未婚';
        } else if(code == 3 || code=="已婚"){
            marrage = '已婚';
        } else if(code == 4 || code=="未婚"){
            marrage = '未婚';
        } else if(code == 5 || code=="离异"){
            marrage = '离异';
        } else if(code == 6 || code=="离婚"){
            marrage = '离婚';
        } else if(code == 7 || code=="丧偶"){
            marrage = '丧偶';
        } else {
            marrage = '未知';
        }
        return marrage;
    }

    function getAgeByCertificateNo(certificateNo) {
        //获取年龄
        var myDate = new Date();
        var month = myDate.getMonth() + 1;
        var day = myDate.getDate();
        var age = myDate.getFullYear() - certificateNo.substring(6, 10) - 1;
        if (certificateNo.substring(10, 12) < month || certificateNo.substring(10, 12) == month && certificateNo.substring(12, 14) <= day) {
            age++;
        }
        return age;
    }



    function getCallRecordRemark(str,createBy,id,agentName) {
        if(str == null || str == "null" || str == "undefined"){
            str = "";
        }
        if (createBy == -1 || agentName == "机器人") {
            return "<a href='javascript:void(0)' onclick='viewCallContent(\""+id+"\")'>查看文本</a>";
        }
        return str;
    }

    function nullToEmpty(str){
        if(str == null || str == "" || str == "undefined"){
            str = "-";
        }
        return str;
    }

    // 机器人通话内容查看
    function viewCallContent(id) {
        var viewCallContentUrl = robotPrefix + '/toViewCallContent?id='+id;
        $.modal.open("通话内容", viewCallContentUrl);
    }

    //电话号码脱敏
    function tellToMd5(tell){
        if(tell != null && tell != ""){
            // tell = tell.substring(0,3) + "****" + tell.substring(7);
        }else{
            tell = "";
        }
        return tell;
    }
    //银行卡、身份证脱敏
    function cardToMd5(cardno){
        if(cardno != null && cardno != ""){
            // cardno = cardno.substring(0,2) + "************" + cardno.substring(14);
        }else {
            cardno ="";
        }
        return cardno;
    }


    function getFormatDate(str) {
        var date = new Date(str);
        var seperator1 = "-";
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = year + seperator1 + month + seperator1 + strDate;
        return currentdate;
    }

    function revert(value) {
        if (value == null || value == '' || value==0) {
            return value;
        }
        value = Math.round(value);
        return value;
    }

    function convertStatus(obj){
        var result = '';
        if(obj=="2"||obj=="32"||obj=="33"){
            return result = "可联";
        }else if(obj=="31"){
            return result = "关机";
        }else if(obj=="4"){
            return result = "空号";
        }else if(obj=="5"){
            return result = "停机";
        }else if(obj=="11"){
            return result = "识别失败";
        }else if(obj=="91"){
            return result = "识别失败";
        }else if(obj =="-1"){
            result = "查询失败";
        }
        return result;
    }




</script>
</body>
</html>